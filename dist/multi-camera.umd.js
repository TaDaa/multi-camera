(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
    typeof define === 'function' && define.amd ? define(['exports'], factory) :
    (global = global || self, factory(global.MultiCamera = {}));
}(this, function (exports) { 'use strict';

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */

    var __assign = function() {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };

    var html = "\n<div class=\"camera-overlay\">\n    <div class=\"camera-zoom camera-zoom-part\">\n        <div class=\"camera-zoom-stretch camera-zoom-part\"></div>\n        <div class=\"camera-zoom-plus\">+</div>\n        <div class=\"camera-zoom-background-wrapper camera-zoom-part\">\n            <div class=\"camera-zoom-background camera-zoom-part\"></div>\n        </div>\n        <div class=\"camera-zoom-minus\">-</div>\n        <div class=\"camera-zoom-thumb camera-zoom-part\"></div>\n    </div>\n    <div class=\"camera-reverse\"></div>\n    <div class=\"camera-take-photo-border camera-take-photo-part\"></div>\n    <div class=\"camera-take-photo camera-take-photo-part\"></div>\n        <a class=\"camera-cancel camera-text-option\" href=\"javascript:void(0);\" >Cancel</a>\n        <a class=\"camera-use-photos camera-text-option\" href=\"javascript:void(0);\">Use Photos</a>\n    <div class=\"camera-indicator top\">\n        <span class=\"camera-indicator-line\"></span>\n        <span class=\"camera-indicator-text\"></span>\n    </div>\n    <div class=\"camera-indicator bottom\">\n        <span class=\"camera-indicator-line\"></span>\n        <span class=\"camera-indicator-text\"></span>\n    </div>\n    <div class=\"camera-indicator right\">\n        <span class=\"camera-indicator-line\"></span>\n        <span class=\"camera-indicator-text\">Photos</span>\n    </div>\n    <div class=\"camera-indicator left\">\n        <span class=\"camera-indicator-line\"></span>\n        <span class=\"camera-indicator-text\"></span>\n    </div>\n    <div class=\"camera-photo-overlay\">\n        <div class=\"camera-photo-overlay-background\"></div>\n        <a href=\"javascript:void(0)\" class=\"camera-photo-overlay-text back\">Back To Camera</a>\n    </div>\n    <div class=\"camera-bottom-toolbar\" >\n    </div>\n</div>\n";

    var css = "\n    .camera-photo-overlay-text.back {\n        transition: opacity 300ms;\n        position: absolute;\n        left: 0.3em;\n        bottom: 4.0em;\n        border-bottom:solid 2px blue;\n        text-shadow:0px 0px 10px rgba(0,0,0,0.5);\n        color: white;\n        z-index: 1;\n        opacity: 0;\n        text-decoration:none;\n        pointer-events:all;\n        padding:0.2em 0.5em;\n    }\n    .camera-photo-overlay-background {\n        position:absolute;\n        top:0;\n        left:0;\n        right:0;\n        bottom:0;\n        background-color:black;\n        opacity: 0;\n        transition: opacity 300ms;\n    }\n    .camera-photo-overlay {\n        position:absolute;\n        top:0;\n        left:0;\n        width: 100%;\n        height: 100%;\n        pointer-events:none;\n        display:none;\n    }\n    .camera-photo-overlay .camera-photo-wrapper {\n        z-index: 0;\n    }\n    .camera-indicator .camera-indicator-text {\n        transform:translate(-50%,-50%);\n        top:50%;\n        left:50%;\n        position:absolute;\n        color:white;\n    }\n    .camera-indicator.left .camera-indicator-text {\n        display:none;\n    }\n    .camera-indicator.left .camera-indicator-line,\n    .camera-indicator.right .camera-indicator-line\n    {\n        position: absolute;\n        top:0;\n        bottom:0;\n        left:0;\n        right:0;\n        background:rgba(50,150,255,0.7);\n        -webkit-mask:linear-gradient(90deg, black 0%, transparent 50%,   black 100%);\n        -webkit-mask-size:100% 100%;\n        -webkit-mask-position:0% 0%;\n        -webkit-mask-repeat: no-repeat;\n    }\n    .camera-indicator {\n        position:absolute;\n        overflow:visible;\n    }\n    .camera-indicator.left {\n        right: 7em;\n        left: 5em;\n        bottom: 4.0em;\n        height: 1px;\n        display:none;\n    }\n    .camera-indicator.right {\n        right: 0.3em;\n        left: 0.3em;\n        top: 1.5em;\n        height: 1px;\n    }\n    .camera-indicator.bottom .camera-indicator-text,\n    .camera-indicator.top .camera-indicator-text\n    {\n        transform:translate(-50%,-50%)rotate(-90deg);\n        top:50%;\n        left:0%;\n        position:absolute;\n        color:white;\n    }\n    .camera-indicator.top .camera-indicator-text {\n        margin-top:-1em;\n    }\n    .camera-indicator.top .camera-indicator-line,\n    .camera-indicator.bottom .camera-indicator-line {\n        position: absolute;\n        top:0;\n        bottom:5.5em;\n        left:0;\n        right:0;\n        background:rgba(50,150,255,0.7);\n        -webkit-mask:linear-gradient(transparent 3em, black 0%, transparent 57%,   black 100%);\n        -webkit-mask-size:100% 100%;\n        -webkit-mask-position:0% 0%;\n        -webkit-mask-repeat: no-repeat;\n    }\n    .camera-indicator.bottom {\n        display:none;\n        right: 0.3em;\n        top: 0em;\n        bottom: 0em;\n        width: 1px;\n    }\n    .camera-indicator.top {\n        display:none;\n        left: 0.3em;\n        top: 0em;\n        bottom: 0em;\n        width: 1px;\n    }\n\n    .camera-overlay {\n        visibility:visible;\n        position:fixed;\n        top:0;\n        left:0;\n        right:0;\n        bottom:0;\n        -webkit-user-select:none;\n    }\n    .camera-took-picture {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: #000;\n        transition: opacity 300ms;\n        opacity: 1;\n    }\n    .camera-take-photo-border {\n        position:absolute;\n        top: 50%;\n        right: -0.25em;\n        transform: scale(1)translate(-50%, -50%);\n        border-radius:50%;\n        height:3.75em;\n        width:3.75em;\n        background:transparent;\n        box-shadow:0px 0px 0px 0.35em white, 0px 0px 0px 0.4em rgba(0,0,0,0.3);\n        transition: transform 500ms;\n        transform-origin: 0 0;\n        transition: transform 100ms linear;\n    }\n    .camera-take-photo {\n        position:absolute;\n        top:50%;\n        right: 0;\n        transform: scale(1)translate(-50%, -50%);\n        transform-origin: 0 0;\n        border-radius:50%;\n        height:3.5em;\n        width:3.5em;\n        background:white;\n        transition: transform 175ms linear;\n    }\n    .taking-picture .camera-take-photo {\n        transform: scale(0.9)translate(-50%, -50%);\n    }\n    .camera-reverse {\n        top: 50%;\n        right: 0.95em;\n        transform: scale(1)translate(0,-5em)translate(-50%, -50%);\n        height: 2.5em;\n        width: 2.5em;\n        background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!-- Svg Vector Icons : http://www.onlinewebfonts.com/icon --%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 1000 1000' enable-background='new 0 0 1000 1000' xml:space='preserve'%3E%3Cmetadata%3E Svg Vector Icons : http://www.onlinewebfonts.com/icon %3C/metadata%3E%3Cg fill='rgba(255,255,255,.9)'%3E%3Cpath stroke='rgba(0,0,0,0.5)' stroke-width='40' fill='transparent' d='M912.2,255H754.6c-81.9-91.9-107.7-122.5-139.2-122.5H389.6c-31.4,0-56.6,30.6-139.1,122.5h-33.8v-40.8h-86.8V255H95.5c-45,0-85.5,33.7-85.5,78.3v449.2c0,44.6,40.5,85,85.5,85h816.7c45,0,77.8-40.4,77.8-85V333.3C990,288.7,957.2,255,912.2,255z'/%3E%3Cpath stroke='rgba(255,255,255,.9)' stroke-width='25' fill='rgba(0,0,0,0.4)' d='M912.2,255H754.6c-81.9-91.9-107.7-122.5-139.2-122.5H389.6c-31.4,0-56.6,30.6-139.1,122.5h-33.8v-40.8h-86.8V255H95.5c-45,0-85.5,33.7-85.5,78.3v449.2c0,44.6,40.5,85,85.5,85h816.7c45,0,77.8-40.4,77.8-85V333.3C990,288.7,957.2,255,912.2,255z'/%3E%3Cpath d='M616.9,659.8c-33.5,28.1-73.9,44.3-116.9,44.3c-92.8,0-169.2-73.9-180.9-158.1h78.1L298,418.3l-95.8,127.6h75.2C289.4,653.1,383.9,745,500,745c53.3,0,105.1-19.3,145.7-54.1l6-5.5l-29.6-29.8L616.9,659.8z'/%3E%3Cpath d='M652.5,354.2C611.1,316.5,557,296,500,296c-53.3,0-105.1,19.3-145.7,54.1l-6,5.2l29.6,29.6l5.2-4.4c33-27.7,74.5-43.4,116.9-43.4c92.8,0,169.1,73.5,180.9,162.8h-78.2l99.1,130.7l96-130.7h-75.3C716.8,449,692.1,390.4,652.5,354.2z'/%3E%3C/g%3E%3C/svg%3E%0A\");\n        background-repeat:no-repeat;\n        background-size:2.5em 2.5em;\n        position: absolute;\n    }\n    .camera-bottom-toolbar {\n        position:absolute;\n        bottom:0;\n        left:0;\n        right:0;\n        height: 4.1em;\n        background:rgba(0,0,0,0.1);\n        overflow-x:scroll;\n        -webkit-overflow-scrolling:touch;\n    }\n    .camera-image {\n        position:relative;\n        display:inline-block;\n        margin-right: 0.5em;\n        box-shadow:0px 0px 0px 0.5em black;\n        height:5em;\n        width:5em;\n    }\n    .camera-text-option {\n        color: white;\n        text-shadow:0px 0px 10px rgba(0,0,0,0.5);\n        text-decoration: none;\n        padding:0 0.5em;\n    }\n    .camera-use-photos {\n        position:absolute;\n        right: 0.3em;\n        bottom: 4.0em;\n        border-bottom:solid 2px rgba(100,255,100,0.7);\n        padding:0.2em 0.5em;\n    }\n    .camera-cancel {\n        position: absolute;\n        left: 0.3em;\n        bottom: 4.0em;\n        border-bottom:solid 2px red;\n        padding:0.2em 0.5em;\n    }\n    .camera-zoom {\n        position: absolute;\n        top: 50%;\n        left: 2em;\n        height: 15em;\n        transform: translate(0, -50%);\n    }\n    .camera-zoom-background-wrapper {\n        position: absolute;\n        width: 0.5em;\n        transform: translate(-50%, 0);\n        top: 0;\n        bottom: 0;\n        -webkit-mask: radial-gradient(transparent .75em, black .75em, black 25em);\n        -webkit-mask-size:30em 30em;\n        -webkit-mask-position:50% 0%;\n        -webkit-mask-repeat: no-repeat;\n    }\n    .camera-zoom-background {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        box-shadow: inset 0px 0px 0px 1px rgba(255,255,255,0.2);\n        background:rgba(0,0,0,0.3);\n        overflow:visible;\n        left: 0;\n        right: 0;\n        border-radius: 1em;\n    }\n    .camera-zoom-plus {\n        color: white;\n        font-size: 1.5em;\n        text-shadow:0px 0px 10px rgba(0,0,0,0.5);\n        bottom: 100%;\n        position:absolute;\n        left: 0;\n        padding: 0.5em;\n        transform: translate(-50%, 0);\n    }\n    .camera-zoom-minus {\n        color: white;\n        font-size: 2em;\n        text-shadow:0px 0px 10px rgba(0,0,0,0.5);\n        padding: 0.5em;\n        top: 100%;\n        left: 0;\n        transform: translate(-50%, 0);\n        margin-top: -0.25em;\n        position:absolute;\n    }\n\n    .camera-zoom-thumb {\n        box-shadow: 0px 0px 0px 0.15em rgba(100,255,100,0.7);\n        border-radius: 50%;\n        height: 1.5em;\n        width: 1.5em;\n        transform:translate(-50%, 50%);\n        bottom: 0%;\n        position:absolute;\n    }\n    .camera-zoom-stretch {\n        position:absolute;\n        left: -1em;\n        top: -1em;\n        right: -1em;\n        bottom: -1em;\n    }\n    .camera-photo-wrapper {\n        transform: translate(0em,0em)scale(1);\n        transition: transform 300ms, width 300ms, height 300ms, opacity 300ms, left 300ms, bottom 300ms;\n        overflow: visible;\n        position: absolute;\n        left: 0;\n        box-shadow: -1px 0px 0px rgba(255,255,255,.5);\n        bottom: 0;\n        width: 3.5em;\n        height: 3.5em;\n        opacity: 0.85;\n        transform-origin: 0% 50%;\n    }\n    .camera-photo-wrapper.active::after {\n        content: \" \";\n        position:absolute;\n        top:0;\n        bottom:0;\n        left:0;\n        right:0;\n        background:rgba(100,255,100,0.35);\n    }\n    .camera-photo {\n        background-color: black;\n        transition: transform 300ms, opacity 300ms;\n        transform: scale(0)translate(0px,0px);\n        transform-origin: 0% 50%;\n        opacity: 1;\n        background-size: cover;\n        background-position: center;\n        width: 100%;\n        height: 100%;\n        background-repeat:no-repeat;\n        position:absolute;\n        z-index:0;\n    }\n    .camera-photo-remove {\n        background-color:rgba(255,0,0,0.5);\n        box-shadow:  0px 5px 10px rgba(0,0,0,0.5);\n        text-shadow:  0px 0px 1px black;\n        background-color:rgba(0,0,0,0.5);\n        background-color:rgba(200,200,200,.8);\n        color: white;\n        text-align:center;\n        transition: transform 300ms;\n        transform: translateX(-100%);\n        position:absolute;\n        z-index:1;\n        font-weight:bold;\n        width:100%;\n        height: auto;\n        top: 0.05em;\n        right: 0.05em;\n        border-radius: 50%;\n        height: 1.5em;\n        width: 1.5em;\n    }\n";

    var MultiCamera = /** @class */ (function () {
        function MultiCamera() {
            var _this = this;
            this._images = [];
            this._maxZoom = 5;
            this._minZoom = 1;
            this._zoom = 1;
            this._events = {
                usephotos: [],
                cancel: [],
                tookphoto: []
            };
            this.touchTypes = MultiCamera.touchTypes;
            MultiCamera._camera = this;
            var element = this._element = MultiCamera._template.cloneNode(true);
            var _a = this._elements = {
                overlay: element,
                zoomPlus: element.querySelector('.camera-zoom-plus'),
                zoomMinus: element.querySelector('.camera-zoom-minus'),
                zoomThumb: element.querySelector('.camera-zoom-thumb'),
                zoomBG: element.querySelector('.camera-zoom-background'),
                zoomBGWrapper: element.querySelector('.camera-zoom-background-wrapper'),
                reverseCamera: element.querySelector('.camera-reverse'),
                cancel: element.querySelector('.camera-cancel'),
                takePhoto: element.querySelector('.camera-take-photo'),
                usePhotos: element.querySelector('.camera-use-photos'),
                bottomToolbar: element.querySelector('.camera-bottom-toolbar'),
                topIndicatorText: element.querySelector('.camera-indicator.top .camera-indicator-text'),
                bottomIndicatorText: element.querySelector('.camera-indicator.bottom .camera-indicator-text'),
                leftIndicatorText: element.querySelector('.camera-indicator.left .camera-indicator-text'),
                rightIndicatorText: element.querySelector('.camera-indicator.right .camera-indicator-text'),
                photoOverlay: element.querySelector('.camera-photo-overlay'),
                photoOverlayBackground: element.querySelector('.camera-photo-overlay-background'),
                back: element.querySelector('.camera-photo-overlay-text.back')
            }, overlay = _a.overlay, takePhoto = _a.takePhoto, back = _a.back, cancel = _a.cancel, usePhotos = _a.usePhotos, emTest = document.createElement('div');
            emTest.style.width = emTest.style.height = '1em';
            emTest.style.position = 'absolute';
            emTest.style.opacity = '0';
            this._element.appendChild(emTest);
            this._emToPx = emTest.clientWidth;
            this._element.removeChild(emTest);
            console.error(element);
            console.error(overlay);
            overlay.style.display = 'none';
            this._reset();
            this._operations = [];
            this._onDeviceReady = this._onDeviceReady.bind(this);
            this._onOrientationChange = this._onOrientationChange.bind(this);
            cancel.addEventListener('click', function () { return _this._onCancelClick(); }, true);
            usePhotos.addEventListener('click', function () { return _this._onUsePhotosClick(); }, true);
            overlay.addEventListener('touchend', function (event) { return _this._onOverlayTouchEnd(event); }, true);
            back.addEventListener('click', function () { return _this._onPhotoOverlayBackClick(); }, true);
            overlay.addEventListener('touchmove', function (event) { return _this._onOverlayTouchMove(event); }, true);
            overlay.addEventListener('touchstart', function (event) { return _this._onOverlayTouchStart(event); }, true);
            overlay.addEventListener('touchcancel', function (event) { return _this._onOverlayTouchCancel(event); }, true);
            takePhoto.addEventListener('transitionend', function () { return _this._onTakePhotoTransitionEnd(); });
            //TODO consider add in show remove eventlistener in hide
            window.addEventListener('resize', this._onOrientationChange);
            if (typeof window['device'] === 'undefined' || typeof window['device'].cordova === 'undefined') {
                document.addEventListener('deviceready', this._onDeviceReady);
            }
            else {
                this._onDeviceReady();
            }
        }
        MultiCamera.prototype.addEventListener = function (name, fn) {
            this._events[name].push(fn);
        };
        MultiCamera.prototype.removeEventListener = function (name, fn) {
            var events = this._events[name], index = events.indexOf(fn);
            if (index !== -1) {
                events.splice(index, 1);
            }
        };
        MultiCamera.prototype.dispatchEvent = function (event) {
            var events = this._events[event.type];
            for (var i = 0, ln = events.length; i < ln; i++) {
                events[i](event);
            }
        };
        MultiCamera.prototype.getScreenDimensions = function () {
            var _a = window.screen, height = _a.height, width = _a.width;
            if (typeof orientation === 'number') {
                if (Math.abs(parseInt("" + window.orientation) / 90) === 1) {
                    height = window.screen.width;
                    width = window.screen.height;
                }
            }
            return { width: width, height: height };
        };
        MultiCamera.prototype.show = function (config) {
            var preview = window['CameraPreview'], overlay = this._elements.overlay, _a = this.getScreenDimensions(), width = _a.width, height = _a.height;
            //TODO check this
            overlay.style.display = 'none';
            if (this._show === true) {
                return;
            }
            if (!this._ready || !preview) {
                this._show = config || {};
                return;
            }
            this._show = true;
            preview.stopCamera(function () {
                console.error('CameraPreview.stopCamera', 'SUCCESS');
                startCamera();
            }, function (err) {
                console.error('CameraPreview.stopCamera', err);
                startCamera();
            });
            function startCamera() {
                preview.startCamera({
                    x: 0,
                    y: 0,
                    width: width,
                    height: height,
                    camera: preview.CAMERA_DIRECTION.BACK,
                    toBack: true,
                    tapPhoto: false,
                    tapFocus: false,
                    previewDrag: false
                }, function () {
                    console.error('CameraPreview.startCamera', 'SUCCESS');
                    overlay.style.display = null;
                    document.body.parentNode.style.visibility = "hidden";
                }, function (err) { return console.error('CameraPreview.startCamera', err); });
            }
            return this;
        };
        MultiCamera.prototype.hide = function () {
            var _this = this;
            var preview = window['CameraPreview'], overlay = this._elements.overlay;
            if (this._ready && this._show) {
                this._show = false;
                window['Promise'].all(this._operations).then(function () {
                    preview.stopCamera(function () {
                        overlay.style.display = 'none';
                        _this._elements.photoOverlay.style.display = 'none';
                        document.body.parentNode.style.visibility = 'visible';
                        console.error('CameraPreview.stopCamera', 'SUCCESS');
                    }, function (err) { return console.error('CameraPreview.stopCamera', err); });
                });
            }
            return this;
        };
        MultiCamera.prototype.takePhoto = function () {
            var _this = this;
            if (!this._ready) {
                return;
            }
            var tookPicture = document.createElement('div'), overlay = this._elements.overlay, _a = this.getScreenDimensions(), width = _a.width, height = _a.height;
            tookPicture.className = 'camera-took-picture';
            if (!this._takingPicture) {
                this._takingPicture = true;
                overlay.classList.add('taking-picture');
            }
            tookPicture.addEventListener('transitionend', function () {
                _this._takingPicture = false;
                if (tookPicture.parentNode) {
                    tookPicture.parentNode.removeChild(tookPicture);
                }
            });
            setTimeout(function () { return tookPicture.style.opacity = '0'; });
            overlay.appendChild(tookPicture);
            var promise = new window['Promise'](function (resolve) {
                var resolved = false;
                var preview = window['CameraPreview'];
                preview.takePicture({ width: width, height: height }, function (base64) {
                    var image = {
                        data: "data:image/jpg;base64," + base64[0],
                        width: width,
                        height: height
                    }, photoWrapper = MultiCamera._photoWrapperTemplate.cloneNode(true), photoElement = photoWrapper.querySelector('.camera-photo'), removeElement = photoWrapper.querySelector('.camera-photo-remove'), bottomToolbar = _this._elements.bottomToolbar, tookPhotoEvent = new CustomEvent('tookphoto', { detail: { data: image.data, width: image.width, height: image.height } });
                    photoElement.style.backgroundImage = "url(\"" + image.data + "\")";
                    bottomToolbar.insertBefore(photoWrapper, bottomToolbar.childNodes[0]);
                    setTimeout(function () {
                        photoElement.style.transform = 'scale(1)translate(0px, 0px)';
                        removeElement.style.transform = 'translateX(0px)';
                    });
                    removeElement.addEventListener('click', function () {
                        _this._removeImage(image);
                    }, true);
                    photoWrapper.addEventListener('click', function ($event) {
                        _this._chooseActivePhoto(image, $event);
                    }, true);
                    _this.dispatchEvent(tookPhotoEvent);
                    image.wrapper = photoWrapper;
                    image.element = photoElement;
                    _this._images.unshift(image);
                    _this._doLayout();
                    resolved = true;
                    resolve();
                }, function () {
                    resolved = true;
                    resolve();
                });
                setTimeout(function () {
                    if (!resolved) {
                        resolve();
                    }
                }, 3000);
            });
            this._operations.push(promise);
            promise.then(function () {
                var index = _this._operations.indexOf(promise);
                if (index !== -1) {
                    _this._operations.splice(index, 1);
                }
            });
        };
        MultiCamera.prototype._removeImage = function (image) {
            var _this = this;
            if (!image) {
                return;
            }
            var index = this._images.indexOf(image), wrapper = image.wrapper;
            if (index !== -1) {
                this._images.splice(index, 1);
            }
            if (this._images.length === 0 && this._showingPhotoOverlay) {
                this._hidePhotoOverlay();
            }
            image.removed = true;
            wrapper.style.transform = wrapper.style.transform.split('scale(1)')[0] + "scale(0)";
            wrapper.style.opacity = '0';
            wrapper.addEventListener('transitionend', function () {
                if (wrapper.parentNode) {
                    _this._elements.bottomToolbar.removeChild(wrapper);
                }
            });
            this._doLayout();
            if (image === this._activePhoto) {
                var next = this._images[index] || this._images[this._images.length - 1];
                if (next) {
                    this._chooseActivePhoto(next, null);
                }
            }
        };
        MultiCamera.prototype._chooseActivePhoto = function (image, event) {
            if (event && event.target['classList'] && event.target['classList'].contains('camera-photo-remove')) {
                return;
            }
            if (this._activePhoto) {
                this._activePhoto.wrapper.classList.remove('active');
            }
            this._activePhoto = image;
            this._showPhotoOverlay();
            image.wrapper.classList.add('active');
        };
        MultiCamera.prototype._hidePhotoOverlay = function () {
            var _this = this;
            var image = this._activePhoto, original = (image || { wrapper: undefined }).wrapper, wrapper = this._showingPhotoOverlay !== false ? this._showingPhotoOverlay.wrapper : this._showingPhotoOverlay, rect = original && original.getBoundingClientRect(), elements = this._elements;
            if (!wrapper) {
                return;
            }
            original.classList.remove('active');
            this._showingPhotoOverlay = false;
            if (wrapper.parentNode === elements.photoOverlay) {
                var photo = wrapper.querySelector('.camera-photo');
                elements.back.style.opacity = '0';
                elements.photoOverlayBackground.style.opacity = '0';
                wrapper.style.height = null;
                wrapper.style.width = null;
                wrapper.style.left = rect.x / this._emToPx + "em";
                wrapper.style.bottom = '0em';
                photo.style.opacity = '0';
                if (image.removed) {
                    wrapper.style.transform = 'translate(0em,0em)scale(0)';
                }
                wrapper.addEventListener('transitionend', function () {
                    if (wrapper.parentNode) {
                        if (!_this._showingPhotoOverlay) {
                            elements.photoOverlay.style.display = 'none';
                        }
                        elements.photoOverlay.removeChild(wrapper);
                    }
                });
            }
        };
        MultiCamera.prototype._showPhotoOverlay = function () {
            var _this = this;
            var image = this._activePhoto, width = image.width, height = image.height, original = image.wrapper, data = image.data, rect = original.getBoundingClientRect(), elements = this._elements;
            if (this._showingPhotoOverlay) {
                this._hidePhotoOverlay();
            }
            var wrapper = (this._showingPhotoOverlay = { data: data, width: width, height: height, wrapper: original.cloneNode(true) }).wrapper, photo = wrapper.querySelector('.camera-photo'), remove = wrapper.querySelector('.camera-photo-remove');
            wrapper.style.boxShadow = 'none';
            elements.photoOverlay.style.display = 'block';
            wrapper.style.transform = 'translate(0em,0em)scale(1)';
            wrapper.style.left = rect.x / this._emToPx + "em";
            elements.photoOverlay.appendChild(wrapper);
            wrapper.removeChild(remove);
            photo.style.opacity = '0';
            setTimeout(function () {
                elements.back.style.opacity = '1';
                elements.photoOverlayBackground.style.opacity = '1';
                photo.style.opacity = '1';
                _this._centerPhotoOverlay();
            });
        };
        MultiCamera.prototype._centerPhotoOverlay = function () {
            var dimensions = this.getScreenDimensions(), cloneImage = this._showingPhotoOverlay;
            var _a = cloneImage || { width: undefined, height: undefined, wrapper: undefined }, width = _a.width, height = _a.height, wrapper = _a.wrapper;
            var scale;
            if (width > dimensions.width) {
                scale = dimensions.width / width;
            }
            if (height > dimensions.height) {
                if (!scale || ((dimensions.height / height) > scale)) {
                    scale = dimensions.height / height;
                }
            }
            if (scale === undefined) {
                scale = 1;
            }
            var cx = (dimensions.width - width * scale) / 2 / this._emToPx, cy = (dimensions.height - height * scale) / 2 / this._emToPx;
            wrapper.style.height = height * scale + "px";
            wrapper.style.width = width * scale + "px";
            wrapper.style.left = cx + "em";
            wrapper.style.bottom = cy + "em";
        };
        MultiCamera.prototype.focus = function (_a) {
            var x = _a.x, y = _a.y;
            var preview = window['CameraPreview'];
            if (this._ready) {
                console.error("MultiCamera.focus(" + [x, y] + ")");
                preview.tapToFocus(x, y, function () { }, function (err) { return console.error('CameraPreview.tapToFocus', err); });
            }
            return this;
        };
        MultiCamera.prototype.switchCamera = function () {
            var _this = this;
            var preview = window['CameraPreview'];
            if (this._ready && preview) {
                window['Promise'].all(this._operations).then(function () {
                    var promise = new window['Promise'](function (resolve) {
                        var resolved = false;
                        preview.switchCamera(function () {
                            _this._frontCamera = !_this._frontCamera;
                            _this.zoom(1);
                            resolved = true;
                            resolve();
                        }, function (err) {
                            console.error('CameraPreview.switchCamera', err);
                            resolved = true;
                            resolve();
                        });
                        setTimeout(function () {
                            if (!resolved) {
                                resolve();
                            }
                        }, 3000);
                    });
                    _this._operations.push(promise);
                    promise.then(function () {
                        var index = _this._operations.indexOf(promise);
                        if (index !== -1) {
                            _this._operations.splice(index, 1);
                        }
                    });
                });
            }
            return this;
        };
        MultiCamera.prototype.zoom = function (zoom) {
            var preview = window['CameraPreview'];
            if (!this._ready || !preview) {
                return;
            }
            var _a = this, _maxZoom = _a._maxZoom, _minZoom = _a._minZoom, _b = this._elements, zoomBG = _b.zoomBG, zoomBGWrapper = _b.zoomBGWrapper, zoomThumb = _b.zoomThumb, backgroundRect = zoomBG.getBoundingClientRect(), backgroundHeight = backgroundRect.height;
            if (zoom < _minZoom) {
                zoom = _minZoom;
            }
            if (zoom > _maxZoom) {
                zoom = _maxZoom;
            }
            this._zoom = zoom;
            var div = ((zoom - 1) / (this._maxZoom - 1)), top = div * backgroundHeight;
            zoomThumb.style.transform = "translateY(" + -top + "px)translate(-50%, 50%)";
            zoomBGWrapper.style.webkitMaskPosition = "50% " + (div * 100) + "%";
            preview.setZoom(zoom, function () { }, function (err) { return console.error('CameraPreview.setZoom', err); });
            return this;
        };
        MultiCamera.prototype._doLayout = function () {
            var images = this._images, width = 3.5, ln = images.length;
            var image, i = 0;
            for (; i < ln; i++) {
                image = images[i];
                image.x = i * width;
                image.wrapper.style.transform = "translate(" + (i * width) + "em, 0em)scale(1)";
            }
            return this;
        };
        MultiCamera.prototype._reset = function () {
            var _a = this._elements, bottomToolbar = _a.bottomToolbar, zoomThumb = _a.zoomThumb, zoomBGWrapper = _a.zoomBGWrapper;
            bottomToolbar.innerHTML = '';
            zoomThumb.style.transform = "translateY(0px)translate(-50%, 50%)";
            zoomBGWrapper.style.webkitMaskPosition = "50% 0%";
            this._images = [];
            this._touchState = { type: MultiCamera.touchTypes.NONE };
            this._frontCamera = false;
            this._zoom = 1;
            this._minZoom = 1;
            this._maxZoom = 5;
        };
        MultiCamera.prototype._onDeviceReady = function () {
            this._ready = true;
            if (this._show) {
                var show = this._show;
                this._show = false;
                this.show(show);
            }
            this.zoom(this._zoom);
            this._onOrientationChange();
            document.removeEventListener('deviceready', this._onDeviceReady);
        };
        MultiCamera.prototype._onOverlayTouchStart = function (event) {
            var _this = this;
            var _a = this._elements, zoomPlus = _a.zoomPlus, zoomMinus = _a.zoomMinus, reverseCamera = _a.reverseCamera, overlay = _a.overlay, classList = event.target['classList'] || { contains: function () { return false; } }, num_touches = event.touches.length;
            var touchState = this._touchState, plusTimer, minusTimer;
            if (classList.contains('camera-zoom-part') && num_touches === 1) {
                touchState = this._touchState = __assign(__assign({}, touchState), { type: MultiCamera.touchTypes.DRAG_ZOOM_THUMB, zoom: this._zoom, xStart: event.pageX, yStart: event.pageY, target: event.target, startEvent: event });
            }
            else if (event.target === zoomPlus && num_touches === 1) {
                this._onZoomPlusMouseDown();
                touchState = this._touchState = __assign(__assign({}, touchState), { type: MultiCamera.touchTypes.HOLD_ZOOM_PLUS, plusTimer: setTimeout(plusTimer = function () {
                        _this._onZoomPlusMouseDown();
                        touchState.plusTimer = setTimeout(plusTimer, 100);
                    }, 100) });
            }
            else if (event.target === zoomMinus && num_touches === 1) {
                this._onZoomMinusMouseDown();
                touchState = this._touchState = __assign(__assign({}, touchState), { type: MultiCamera.touchTypes.HOLD_ZOOM_MINUS, minusTimer: setTimeout(minusTimer = function () {
                        _this._onZoomMinusMouseDown();
                        touchState.minusTimer = setTimeout(minusTimer, 100);
                    }, 100) });
            }
            else if (event.target === reverseCamera && num_touches === 1) {
                this.switchCamera();
            }
            else if (classList.contains('camera-take-photo-part') && num_touches === 1) {
                this.takePhoto();
            }
            else if (event.target === overlay) {
                touchState.type = MultiCamera.touchTypes.DRAG_ZOOM_FINGERS;
                var touches = event.changedTouches, order, starts, touch;
                if (!touchState.starts) {
                    touchState.starts = { length: 0 };
                    touchState.order = [];
                    touchState.zoom = this._zoom;
                }
                starts = touchState.starts;
                order = touchState.order;
                for (var i = 0, ln = touches.length; i < ln; i++) {
                    touch = touches[i];
                    if (!starts[touch.identifier]) {
                        starts[touch.identifier] = { x: touch.pageX, y: touch.pageY };
                        starts.length++;
                        order.push(touch.identifier);
                    }
                }
                if (starts.length > 1) {
                    touchState.not_click = true;
                }
            }
        };
        MultiCamera.prototype._onOverlayTouchEnd = function (event) {
            var touchState = this._touchState, type = touchState.type;
            if (type === MultiCamera.touchTypes.HOLD_ZOOM_PLUS) {
                clearTimeout(touchState.plusTimer);
                touchState = { type: MultiCamera.touchTypes.NONE };
            }
            else if (type === MultiCamera.touchTypes.HOLD_ZOOM_MINUS) {
                clearTimeout(touchState.minusTimer);
                touchState = { type: MultiCamera.touchTypes.NONE };
            }
            else if (type === MultiCamera.touchTypes.DRAG_ZOOM_FINGERS) {
                if (!touchState.not_click) {
                    this._onOverlayClick(event);
                }
                var touches = event.changedTouches, starts = touchState.starts, order = touchState.order;
                var touch;
                for (var i = 0, ln = touches.length; i < ln; i++) {
                    touch = touches[i];
                    if (starts[touch.identifier]) {
                        order.splice(order.indexOf(touch.identifier), 1);
                        delete starts[touch.identifier];
                        starts.length--;
                    }
                }
                if (starts.length === 0) {
                    touchState = { type: MultiCamera.touchTypes.NONE };
                }
            }
            else {
                touchState = { type: MultiCamera.touchTypes.NONE };
                touchState.type = MultiCamera.touchTypes.NONE;
            }
            this._touchState = touchState;
        };
        MultiCamera.prototype._onOverlayTouchCancel = function (event) {
            this._onOverlayTouchEnd(event);
        };
        MultiCamera.prototype._onOverlayTouchMove = function (event) {
            var touchState = this._touchState, type = touchState.type;
            if (type === MultiCamera.touchTypes.DRAG_ZOOM_THUMB) {
                var pageY = event.pageY - touchState.yStart, background = this._elements.zoomBG, backgroundRect = background.getBoundingClientRect(), backgroundHeight = backgroundRect.height;
                this.zoom(touchState.zoom - pageY / backgroundHeight * 3);
            }
            else if (type == MultiCamera.touchTypes.DRAG_ZOOM_FINGERS) {
                var starts = touchState.starts, order = touchState.order, start1 = starts[order[0]], start2 = starts[order[1]], touches = event.touches, dimensions = this.getScreenDimensions(), width = dimensions.width, height = dimensions.height;
                var current1, current2, startX1, startX2, startY1, startY2, currentX1, currentX2, currentY1, currentY2, dist1, dist2, touch, diff;
                for (var i = 0, ln = touches.length; i < ln; i++) {
                    touch = touches[i];
                    if (touch.identifier === order[0]) {
                        current1 = touch;
                        if (current2) {
                            break;
                        }
                    }
                    else if (touch.identifier === order[1]) {
                        current2 = touch;
                        if (current1) {
                            break;
                        }
                    }
                }
                if (start1) {
                    startX1 = start1.x;
                    startY1 = start1.y;
                }
                if (current1) {
                    currentX1 = current1.pageX;
                    currentY1 = current1.pageY;
                }
                if (!touchState.not_click && start1 && current1) {
                    dist1 = Math.sqrt((Math.pow((startX1 - currentX1), 2)) + (Math.pow((startY1 - currentY1), 2)));
                    if (Math.abs(dist1) > 7) {
                        touchState.not_click = true;
                    }
                }
                if (start1 && start2 && current1 && current2) {
                    startX2 = start2.x;
                    startY2 = start2.y;
                    currentX2 = current2.pageX;
                    currentY2 = current2.pageY;
                    dist1 = Math.sqrt((Math.pow((startX2 - startX1), 2)) + (Math.pow((startY2 - startY1), 2)));
                    dist2 = Math.sqrt((Math.pow((currentX2 - currentX1), 2)) + (Math.pow((currentY2 - currentY1), 2)));
                    diff = dist2 - dist1;
                    this.zoom(touchState.zoom + diff / Math.min(width, height) * 6);
                }
            }
        };
        MultiCamera.prototype._onOrientationChange = function () {
            var _this = this;
            var preview = window['CameraPreview'], dimensions = this.getScreenDimensions(), width = dimensions.width, height = dimensions.height;
            if (this.show && this._ready && preview) {
                preview.setPreviewSize(dimensions, function () {
                    var doneDimensions = _this.getScreenDimensions();
                    if (doneDimensions.width !== width || doneDimensions.height !== height) {
                        _this._onOrientationChange();
                    }
                }, function (err) { return console.error('CameraPreview.setPreviewSize', err); });
            }
            if (this._showingPhotoOverlay) {
                this._centerPhotoOverlay();
            }
        };
        MultiCamera.prototype._onOverlayClick = function (_a) {
            var x = _a.pageX, y = _a.pageY;
            this.focus({ x: x, y: y });
        };
        MultiCamera.prototype._onReverseCameraClick = function () {
            this.switchCamera();
        };
        MultiCamera.prototype._onZoomPlusMouseDown = function () {
            if ((this._zoom + 0.15) <= this._maxZoom) {
                this.zoom(this._zoom + 0.15);
            }
            else {
                this.zoom(this._maxZoom);
            }
        };
        MultiCamera.prototype._onZoomMinusMouseDown = function () {
            if ((this._zoom - 0.15) >= this._minZoom) {
                this.zoom(this._zoom - 0.15);
            }
            else {
                this.zoom(this._minZoom);
            }
        };
        MultiCamera.prototype._onTakePhotoTransitionEnd = function () {
            var overlay = this._elements.overlay;
            if (overlay && overlay.classList && overlay.classList.contains('taking-picture')) {
                overlay.classList.remove('taking-picture');
            }
        };
        MultiCamera.prototype._onPhotoOverlayBackClick = function () {
            this._hidePhotoOverlay();
        };
        MultiCamera.prototype._onCancelClick = function () {
            var _this = this;
            if (this._show) {
                this.hide();
                window['Promise'].all(this._operations)
                    .then(function () {
                    var event = new CustomEvent('cancel', { detail: [] });
                    _this.dispatchEvent(event);
                    _this._reset();
                });
            }
        };
        MultiCamera.prototype._onUsePhotosClick = function () {
            var _this = this;
            if (this._show) {
                this.hide();
                window['Promise'].all(this._operations).then(function () {
                    console.error('donenenene');
                    var event = new CustomEvent('usephotos', { detail: _this._images.map(function (d) { return ({ width: d.width, height: d.height, data: d.data }); }) });
                    _this.dispatchEvent(event);
                    _this._reset();
                });
            }
        };
        MultiCamera.show = function (success, config) {
            console.error('staticshow...');
            var camera = this._camera;
            var cancelCB = function () {
                success && success([]);
                camera.removeEventListener('usephotos', usePhotosCB);
                camera.removeEventListener('cancel', cancelCB);
            }, usePhotosCB = function ($event) {
                console.error('in use photos');
                success && success($event.detail);
                camera.removeEventListener('usephotos', usePhotosCB);
                camera.removeEventListener('cancel', cancelCB);
            };
            if (arguments.length === 1) {
                if (typeof success === 'object') {
                    config = success;
                    success = undefined;
                }
            }
            if (!camera) {
                camera = this._camera = new MultiCamera();
                document.body.appendChild(camera._element);
            }
            camera.addEventListener('usephotos', usePhotosCB);
            camera.addEventListener('cancel', cancelCB);
            camera.show(config);
            return this;
        };
        MultiCamera.hide = function () {
            if (this._camera) {
                this._camera.hide();
            }
            return this;
        };
        MultiCamera.addEventListener = function () {
            this._camera.addEventListener.apply(this._camera, arguments);
            return this;
        };
        MultiCamera.removeEventListener = function () {
            this._camera.removeEventListener.apply(this._camera, arguments);
            return this;
        };
        MultiCamera.touchTypes = {
            NONE: 0,
            DRAG_ZOOM_THUMB: 1,
            DRAG_ZOOM_FINGERS: 2,
            HOLD_ZOOM_PLUS: 4,
            HOLD_ZOOM_MINUS: 8
        };
        MultiCamera._photoWrapperTemplate = (function () {
            var result = document.createElement('div');
            result.innerHTML = "\n            <div class=\"camera-photo-wrapper\">\n                <div class=\"camera-photo\"></div>\n                <div class=\"camera-photo-remove\">-</div>\n            </div> ";
            return result.children[0];
        })();
        MultiCamera._template = (function () {
            var result = document.createElement('div');
            result.innerHTML = "\n            " + html + "\n            <style>\n            " + css + "\n            </style>\n        ";
            return result.children[0];
        })();
        return MultiCamera;
    }());

    exports.MultiCamera = MultiCamera;

    Object.defineProperty(exports, '__esModule', { value: true });

}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXVsdGktY2FtZXJhLnVtZC5qcyIsInNvdXJjZXMiOlsiLi4vc3JjL211bHRpY2FtZXJhLmh0bWwudHMiLCIuLi9zcmMvbXVsdGljYW1lcmEuY3NzLnRzIiwiLi4vc3JjL211bHRpY2FtZXJhLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBodG1sID0gYFxuPGRpdiBjbGFzcz1cImNhbWVyYS1vdmVybGF5XCI+XG4gICAgPGRpdiBjbGFzcz1cImNhbWVyYS16b29tIGNhbWVyYS16b29tLXBhcnRcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNhbWVyYS16b29tLXN0cmV0Y2ggY2FtZXJhLXpvb20tcGFydFwiPjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2FtZXJhLXpvb20tcGx1c1wiPis8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNhbWVyYS16b29tLWJhY2tncm91bmQtd3JhcHBlciBjYW1lcmEtem9vbS1wYXJ0XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FtZXJhLXpvb20tYmFja2dyb3VuZCBjYW1lcmEtem9vbS1wYXJ0XCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2FtZXJhLXpvb20tbWludXNcIj4tPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjYW1lcmEtem9vbS10aHVtYiBjYW1lcmEtem9vbS1wYXJ0XCI+PC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImNhbWVyYS1yZXZlcnNlXCI+PC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImNhbWVyYS10YWtlLXBob3RvLWJvcmRlciBjYW1lcmEtdGFrZS1waG90by1wYXJ0XCI+PC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImNhbWVyYS10YWtlLXBob3RvIGNhbWVyYS10YWtlLXBob3RvLXBhcnRcIj48L2Rpdj5cbiAgICAgICAgPGEgY2xhc3M9XCJjYW1lcmEtY2FuY2VsIGNhbWVyYS10ZXh0LW9wdGlvblwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgPkNhbmNlbDwvYT5cbiAgICAgICAgPGEgY2xhc3M9XCJjYW1lcmEtdXNlLXBob3RvcyBjYW1lcmEtdGV4dC1vcHRpb25cIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiPlVzZSBQaG90b3M8L2E+XG4gICAgPGRpdiBjbGFzcz1cImNhbWVyYS1pbmRpY2F0b3IgdG9wXCI+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiY2FtZXJhLWluZGljYXRvci1saW5lXCI+PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cImNhbWVyYS1pbmRpY2F0b3ItdGV4dFwiPjwvc3Bhbj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiY2FtZXJhLWluZGljYXRvciBib3R0b21cIj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJjYW1lcmEtaW5kaWNhdG9yLWxpbmVcIj48L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiY2FtZXJhLWluZGljYXRvci10ZXh0XCI+PC9zcGFuPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJjYW1lcmEtaW5kaWNhdG9yIHJpZ2h0XCI+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiY2FtZXJhLWluZGljYXRvci1saW5lXCI+PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cImNhbWVyYS1pbmRpY2F0b3ItdGV4dFwiPlBob3Rvczwvc3Bhbj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiY2FtZXJhLWluZGljYXRvciBsZWZ0XCI+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiY2FtZXJhLWluZGljYXRvci1saW5lXCI+PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cImNhbWVyYS1pbmRpY2F0b3ItdGV4dFwiPjwvc3Bhbj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiY2FtZXJhLXBob3RvLW92ZXJsYXlcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNhbWVyYS1waG90by1vdmVybGF5LWJhY2tncm91bmRcIj48L2Rpdj5cbiAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiIGNsYXNzPVwiY2FtZXJhLXBob3RvLW92ZXJsYXktdGV4dCBiYWNrXCI+QmFjayBUbyBDYW1lcmE8L2E+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImNhbWVyYS1ib3R0b20tdG9vbGJhclwiID5cbiAgICA8L2Rpdj5cbjwvZGl2PlxuYFxuIiwiZXhwb3J0IGNvbnN0IGNzcyA9IGBcbiAgICAuY2FtZXJhLXBob3RvLW92ZXJsYXktdGV4dC5iYWNrIHtcbiAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAzMDBtcztcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBsZWZ0OiAwLjNlbTtcbiAgICAgICAgYm90dG9tOiA0LjBlbTtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTpzb2xpZCAycHggYmx1ZTtcbiAgICAgICAgdGV4dC1zaGFkb3c6MHB4IDBweCAxMHB4IHJnYmEoMCwwLDAsMC41KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICB6LWluZGV4OiAxO1xuICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICB0ZXh0LWRlY29yYXRpb246bm9uZTtcbiAgICAgICAgcG9pbnRlci1ldmVudHM6YWxsO1xuICAgICAgICBwYWRkaW5nOjAuMmVtIDAuNWVtO1xuICAgIH1cbiAgICAuY2FtZXJhLXBob3RvLW92ZXJsYXktYmFja2dyb3VuZCB7XG4gICAgICAgIHBvc2l0aW9uOmFic29sdXRlO1xuICAgICAgICB0b3A6MDtcbiAgICAgICAgbGVmdDowO1xuICAgICAgICByaWdodDowO1xuICAgICAgICBib3R0b206MDtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjpibGFjaztcbiAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAzMDBtcztcbiAgICB9XG4gICAgLmNhbWVyYS1waG90by1vdmVybGF5IHtcbiAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XG4gICAgICAgIHRvcDowO1xuICAgICAgICBsZWZ0OjA7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOm5vbmU7XG4gICAgICAgIGRpc3BsYXk6bm9uZTtcbiAgICB9XG4gICAgLmNhbWVyYS1waG90by1vdmVybGF5IC5jYW1lcmEtcGhvdG8td3JhcHBlciB7XG4gICAgICAgIHotaW5kZXg6IDA7XG4gICAgfVxuICAgIC5jYW1lcmEtaW5kaWNhdG9yIC5jYW1lcmEtaW5kaWNhdG9yLXRleHQge1xuICAgICAgICB0cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUsLTUwJSk7XG4gICAgICAgIHRvcDo1MCU7XG4gICAgICAgIGxlZnQ6NTAlO1xuICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcbiAgICAgICAgY29sb3I6d2hpdGU7XG4gICAgfVxuICAgIC5jYW1lcmEtaW5kaWNhdG9yLmxlZnQgLmNhbWVyYS1pbmRpY2F0b3ItdGV4dCB7XG4gICAgICAgIGRpc3BsYXk6bm9uZTtcbiAgICB9XG4gICAgLmNhbWVyYS1pbmRpY2F0b3IubGVmdCAuY2FtZXJhLWluZGljYXRvci1saW5lLFxuICAgIC5jYW1lcmEtaW5kaWNhdG9yLnJpZ2h0IC5jYW1lcmEtaW5kaWNhdG9yLWxpbmVcbiAgICB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOjA7XG4gICAgICAgIGJvdHRvbTowO1xuICAgICAgICBsZWZ0OjA7XG4gICAgICAgIHJpZ2h0OjA7XG4gICAgICAgIGJhY2tncm91bmQ6cmdiYSg1MCwxNTAsMjU1LDAuNyk7XG4gICAgICAgIC13ZWJraXQtbWFzazpsaW5lYXItZ3JhZGllbnQoOTBkZWcsIGJsYWNrIDAlLCB0cmFuc3BhcmVudCA1MCUsICAgYmxhY2sgMTAwJSk7XG4gICAgICAgIC13ZWJraXQtbWFzay1zaXplOjEwMCUgMTAwJTtcbiAgICAgICAgLXdlYmtpdC1tYXNrLXBvc2l0aW9uOjAlIDAlO1xuICAgICAgICAtd2Via2l0LW1hc2stcmVwZWF0OiBuby1yZXBlYXQ7XG4gICAgfVxuICAgIC5jYW1lcmEtaW5kaWNhdG9yIHtcbiAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XG4gICAgICAgIG92ZXJmbG93OnZpc2libGU7XG4gICAgfVxuICAgIC5jYW1lcmEtaW5kaWNhdG9yLmxlZnQge1xuICAgICAgICByaWdodDogN2VtO1xuICAgICAgICBsZWZ0OiA1ZW07XG4gICAgICAgIGJvdHRvbTogNC4wZW07XG4gICAgICAgIGhlaWdodDogMXB4O1xuICAgICAgICBkaXNwbGF5Om5vbmU7XG4gICAgfVxuICAgIC5jYW1lcmEtaW5kaWNhdG9yLnJpZ2h0IHtcbiAgICAgICAgcmlnaHQ6IDAuM2VtO1xuICAgICAgICBsZWZ0OiAwLjNlbTtcbiAgICAgICAgdG9wOiAxLjVlbTtcbiAgICAgICAgaGVpZ2h0OiAxcHg7XG4gICAgfVxuICAgIC5jYW1lcmEtaW5kaWNhdG9yLmJvdHRvbSAuY2FtZXJhLWluZGljYXRvci10ZXh0LFxuICAgIC5jYW1lcmEtaW5kaWNhdG9yLnRvcCAuY2FtZXJhLWluZGljYXRvci10ZXh0XG4gICAge1xuICAgICAgICB0cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUsLTUwJSlyb3RhdGUoLTkwZGVnKTtcbiAgICAgICAgdG9wOjUwJTtcbiAgICAgICAgbGVmdDowJTtcbiAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XG4gICAgICAgIGNvbG9yOndoaXRlO1xuICAgIH1cbiAgICAuY2FtZXJhLWluZGljYXRvci50b3AgLmNhbWVyYS1pbmRpY2F0b3ItdGV4dCB7XG4gICAgICAgIG1hcmdpbi10b3A6LTFlbTtcbiAgICB9XG4gICAgLmNhbWVyYS1pbmRpY2F0b3IudG9wIC5jYW1lcmEtaW5kaWNhdG9yLWxpbmUsXG4gICAgLmNhbWVyYS1pbmRpY2F0b3IuYm90dG9tIC5jYW1lcmEtaW5kaWNhdG9yLWxpbmUge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDowO1xuICAgICAgICBib3R0b206NS41ZW07XG4gICAgICAgIGxlZnQ6MDtcbiAgICAgICAgcmlnaHQ6MDtcbiAgICAgICAgYmFja2dyb3VuZDpyZ2JhKDUwLDE1MCwyNTUsMC43KTtcbiAgICAgICAgLXdlYmtpdC1tYXNrOmxpbmVhci1ncmFkaWVudCh0cmFuc3BhcmVudCAzZW0sIGJsYWNrIDAlLCB0cmFuc3BhcmVudCA1NyUsICAgYmxhY2sgMTAwJSk7XG4gICAgICAgIC13ZWJraXQtbWFzay1zaXplOjEwMCUgMTAwJTtcbiAgICAgICAgLXdlYmtpdC1tYXNrLXBvc2l0aW9uOjAlIDAlO1xuICAgICAgICAtd2Via2l0LW1hc2stcmVwZWF0OiBuby1yZXBlYXQ7XG4gICAgfVxuICAgIC5jYW1lcmEtaW5kaWNhdG9yLmJvdHRvbSB7XG4gICAgICAgIGRpc3BsYXk6bm9uZTtcbiAgICAgICAgcmlnaHQ6IDAuM2VtO1xuICAgICAgICB0b3A6IDBlbTtcbiAgICAgICAgYm90dG9tOiAwZW07XG4gICAgICAgIHdpZHRoOiAxcHg7XG4gICAgfVxuICAgIC5jYW1lcmEtaW5kaWNhdG9yLnRvcCB7XG4gICAgICAgIGRpc3BsYXk6bm9uZTtcbiAgICAgICAgbGVmdDogMC4zZW07XG4gICAgICAgIHRvcDogMGVtO1xuICAgICAgICBib3R0b206IDBlbTtcbiAgICAgICAgd2lkdGg6IDFweDtcbiAgICB9XG5cbiAgICAuY2FtZXJhLW92ZXJsYXkge1xuICAgICAgICB2aXNpYmlsaXR5OnZpc2libGU7XG4gICAgICAgIHBvc2l0aW9uOmZpeGVkO1xuICAgICAgICB0b3A6MDtcbiAgICAgICAgbGVmdDowO1xuICAgICAgICByaWdodDowO1xuICAgICAgICBib3R0b206MDtcbiAgICAgICAgLXdlYmtpdC11c2VyLXNlbGVjdDpub25lO1xuICAgIH1cbiAgICAuY2FtZXJhLXRvb2stcGljdHVyZSB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICByaWdodDogMDtcbiAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICBiYWNrZ3JvdW5kOiAjMDAwO1xuICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDMwMG1zO1xuICAgICAgICBvcGFjaXR5OiAxO1xuICAgIH1cbiAgICAuY2FtZXJhLXRha2UtcGhvdG8tYm9yZGVyIHtcbiAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XG4gICAgICAgIHRvcDogNTAlO1xuICAgICAgICByaWdodDogLTAuMjVlbTtcbiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxKXRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czo1MCU7XG4gICAgICAgIGhlaWdodDozLjc1ZW07XG4gICAgICAgIHdpZHRoOjMuNzVlbTtcbiAgICAgICAgYmFja2dyb3VuZDp0cmFuc3BhcmVudDtcbiAgICAgICAgYm94LXNoYWRvdzowcHggMHB4IDBweCAwLjM1ZW0gd2hpdGUsIDBweCAwcHggMHB4IDAuNGVtIHJnYmEoMCwwLDAsMC4zKTtcbiAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDUwMG1zO1xuICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiAwIDA7XG4gICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAxMDBtcyBsaW5lYXI7XG4gICAgfVxuICAgIC5jYW1lcmEtdGFrZS1waG90byB7XG4gICAgICAgIHBvc2l0aW9uOmFic29sdXRlO1xuICAgICAgICB0b3A6NTAlO1xuICAgICAgICByaWdodDogMDtcbiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxKXRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogMCAwO1xuICAgICAgICBib3JkZXItcmFkaXVzOjUwJTtcbiAgICAgICAgaGVpZ2h0OjMuNWVtO1xuICAgICAgICB3aWR0aDozLjVlbTtcbiAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTtcbiAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDE3NW1zIGxpbmVhcjtcbiAgICB9XG4gICAgLnRha2luZy1waWN0dXJlIC5jYW1lcmEtdGFrZS1waG90byB7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMC45KXRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICB9XG4gICAgLmNhbWVyYS1yZXZlcnNlIHtcbiAgICAgICAgdG9wOiA1MCU7XG4gICAgICAgIHJpZ2h0OiAwLjk1ZW07XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMSl0cmFuc2xhdGUoMCwtNWVtKXRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICAgICAgaGVpZ2h0OiAyLjVlbTtcbiAgICAgICAgd2lkdGg6IDIuNWVtO1xuICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDJTNGeG1sIHZlcnNpb249JzEuMCcgZW5jb2Rpbmc9J3V0Zi04JyUzRiUzRSUzQyEtLSBTdmcgVmVjdG9yIEljb25zIDogaHR0cDovL3d3dy5vbmxpbmV3ZWJmb250cy5jb20vaWNvbiAtLSUzRSUzQyFET0NUWVBFIHN2ZyBQVUJMSUMgJy0vL1czQy8vRFREIFNWRyAxLjEvL0VOJyAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJyUzRSUzQ3N2ZyB2ZXJzaW9uPScxLjEnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgeG1sbnM6eGxpbms9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnIHg9JzBweCcgeT0nMHB4JyB2aWV3Qm94PScwIDAgMTAwMCAxMDAwJyBlbmFibGUtYmFja2dyb3VuZD0nbmV3IDAgMCAxMDAwIDEwMDAnIHhtbDpzcGFjZT0ncHJlc2VydmUnJTNFJTNDbWV0YWRhdGElM0UgU3ZnIFZlY3RvciBJY29ucyA6IGh0dHA6Ly93d3cub25saW5ld2ViZm9udHMuY29tL2ljb24gJTNDL21ldGFkYXRhJTNFJTNDZyBmaWxsPSdyZ2JhKDI1NSwyNTUsMjU1LC45KSclM0UlM0NwYXRoIHN0cm9rZT0ncmdiYSgwLDAsMCwwLjUpJyBzdHJva2Utd2lkdGg9JzQwJyBmaWxsPSd0cmFuc3BhcmVudCcgZD0nTTkxMi4yLDI1NUg3NTQuNmMtODEuOS05MS45LTEwNy43LTEyMi41LTEzOS4yLTEyMi41SDM4OS42Yy0zMS40LDAtNTYuNiwzMC42LTEzOS4xLDEyMi41aC0zMy44di00MC44aC04Ni44VjI1NUg5NS41Yy00NSwwLTg1LjUsMzMuNy04NS41LDc4LjN2NDQ5LjJjMCw0NC42LDQwLjUsODUsODUuNSw4NWg4MTYuN2M0NSwwLDc3LjgtNDAuNCw3Ny44LTg1VjMzMy4zQzk5MCwyODguNyw5NTcuMiwyNTUsOTEyLjIsMjU1eicvJTNFJTNDcGF0aCBzdHJva2U9J3JnYmEoMjU1LDI1NSwyNTUsLjkpJyBzdHJva2Utd2lkdGg9JzI1JyBmaWxsPSdyZ2JhKDAsMCwwLDAuNCknIGQ9J005MTIuMiwyNTVINzU0LjZjLTgxLjktOTEuOS0xMDcuNy0xMjIuNS0xMzkuMi0xMjIuNUgzODkuNmMtMzEuNCwwLTU2LjYsMzAuNi0xMzkuMSwxMjIuNWgtMzMuOHYtNDAuOGgtODYuOFYyNTVIOTUuNWMtNDUsMC04NS41LDMzLjctODUuNSw3OC4zdjQ0OS4yYzAsNDQuNiw0MC41LDg1LDg1LjUsODVoODE2LjdjNDUsMCw3Ny44LTQwLjQsNzcuOC04NVYzMzMuM0M5OTAsMjg4LjcsOTU3LjIsMjU1LDkxMi4yLDI1NXonLyUzRSUzQ3BhdGggZD0nTTYxNi45LDY1OS44Yy0zMy41LDI4LjEtNzMuOSw0NC4zLTExNi45LDQ0LjNjLTkyLjgsMC0xNjkuMi03My45LTE4MC45LTE1OC4xaDc4LjFMMjk4LDQxOC4zbC05NS44LDEyNy42aDc1LjJDMjg5LjQsNjUzLjEsMzgzLjksNzQ1LDUwMCw3NDVjNTMuMywwLDEwNS4xLTE5LjMsMTQ1LjctNTQuMWw2LTUuNWwtMjkuNi0yOS44TDYxNi45LDY1OS44eicvJTNFJTNDcGF0aCBkPSdNNjUyLjUsMzU0LjJDNjExLjEsMzE2LjUsNTU3LDI5Niw1MDAsMjk2Yy01My4zLDAtMTA1LjEsMTkuMy0xNDUuNyw1NC4xbC02LDUuMmwyOS42LDI5LjZsNS4yLTQuNGMzMy0yNy43LDc0LjUtNDMuNCwxMTYuOS00My40YzkyLjgsMCwxNjkuMSw3My41LDE4MC45LDE2Mi44aC03OC4ybDk5LjEsMTMwLjdsOTYtMTMwLjdoLTc1LjNDNzE2LjgsNDQ5LDY5Mi4xLDM5MC40LDY1Mi41LDM1NC4yeicvJTNFJTNDL2clM0UlM0Mvc3ZnJTNFJTBBXCIpO1xuICAgICAgICBiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7XG4gICAgICAgIGJhY2tncm91bmQtc2l6ZToyLjVlbSAyLjVlbTtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIH1cbiAgICAuY2FtZXJhLWJvdHRvbS10b29sYmFyIHtcbiAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XG4gICAgICAgIGJvdHRvbTowO1xuICAgICAgICBsZWZ0OjA7XG4gICAgICAgIHJpZ2h0OjA7XG4gICAgICAgIGhlaWdodDogNC4xZW07XG4gICAgICAgIGJhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjEpO1xuICAgICAgICBvdmVyZmxvdy14OnNjcm9sbDtcbiAgICAgICAgLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6dG91Y2g7XG4gICAgfVxuICAgIC5jYW1lcmEtaW1hZ2Uge1xuICAgICAgICBwb3NpdGlvbjpyZWxhdGl2ZTtcbiAgICAgICAgZGlzcGxheTppbmxpbmUtYmxvY2s7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMC41ZW07XG4gICAgICAgIGJveC1zaGFkb3c6MHB4IDBweCAwcHggMC41ZW0gYmxhY2s7XG4gICAgICAgIGhlaWdodDo1ZW07XG4gICAgICAgIHdpZHRoOjVlbTtcbiAgICB9XG4gICAgLmNhbWVyYS10ZXh0LW9wdGlvbiB7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgdGV4dC1zaGFkb3c6MHB4IDBweCAxMHB4IHJnYmEoMCwwLDAsMC41KTtcbiAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgICAgICBwYWRkaW5nOjAgMC41ZW07XG4gICAgfVxuICAgIC5jYW1lcmEtdXNlLXBob3RvcyB7XG4gICAgICAgIHBvc2l0aW9uOmFic29sdXRlO1xuICAgICAgICByaWdodDogMC4zZW07XG4gICAgICAgIGJvdHRvbTogNC4wZW07XG4gICAgICAgIGJvcmRlci1ib3R0b206c29saWQgMnB4IHJnYmEoMTAwLDI1NSwxMDAsMC43KTtcbiAgICAgICAgcGFkZGluZzowLjJlbSAwLjVlbTtcbiAgICB9XG4gICAgLmNhbWVyYS1jYW5jZWwge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGxlZnQ6IDAuM2VtO1xuICAgICAgICBib3R0b206IDQuMGVtO1xuICAgICAgICBib3JkZXItYm90dG9tOnNvbGlkIDJweCByZWQ7XG4gICAgICAgIHBhZGRpbmc6MC4yZW0gMC41ZW07XG4gICAgfVxuICAgIC5jYW1lcmEtem9vbSB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiA1MCU7XG4gICAgICAgIGxlZnQ6IDJlbTtcbiAgICAgICAgaGVpZ2h0OiAxNWVtO1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLCAtNTAlKTtcbiAgICB9XG4gICAgLmNhbWVyYS16b29tLWJhY2tncm91bmQtd3JhcHBlciB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgd2lkdGg6IDAuNWVtO1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAwKTtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICBib3R0b206IDA7XG4gICAgICAgIC13ZWJraXQtbWFzazogcmFkaWFsLWdyYWRpZW50KHRyYW5zcGFyZW50IC43NWVtLCBibGFjayAuNzVlbSwgYmxhY2sgMjVlbSk7XG4gICAgICAgIC13ZWJraXQtbWFzay1zaXplOjMwZW0gMzBlbTtcbiAgICAgICAgLXdlYmtpdC1tYXNrLXBvc2l0aW9uOjUwJSAwJTtcbiAgICAgICAgLXdlYmtpdC1tYXNrLXJlcGVhdDogbm8tcmVwZWF0O1xuICAgIH1cbiAgICAuY2FtZXJhLXpvb20tYmFja2dyb3VuZCB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICBib3R0b206IDA7XG4gICAgICAgIGJveC1zaGFkb3c6IGluc2V0IDBweCAwcHggMHB4IDFweCByZ2JhKDI1NSwyNTUsMjU1LDAuMik7XG4gICAgICAgIGJhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjMpO1xuICAgICAgICBvdmVyZmxvdzp2aXNpYmxlO1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICByaWdodDogMDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMWVtO1xuICAgIH1cbiAgICAuY2FtZXJhLXpvb20tcGx1cyB7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgZm9udC1zaXplOiAxLjVlbTtcbiAgICAgICAgdGV4dC1zaGFkb3c6MHB4IDBweCAxMHB4IHJnYmEoMCwwLDAsMC41KTtcbiAgICAgICAgYm90dG9tOiAxMDAlO1xuICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgcGFkZGluZzogMC41ZW07XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIDApO1xuICAgIH1cbiAgICAuY2FtZXJhLXpvb20tbWludXMge1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIGZvbnQtc2l6ZTogMmVtO1xuICAgICAgICB0ZXh0LXNoYWRvdzowcHggMHB4IDEwcHggcmdiYSgwLDAsMCwwLjUpO1xuICAgICAgICBwYWRkaW5nOiAwLjVlbTtcbiAgICAgICAgdG9wOiAxMDAlO1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAwKTtcbiAgICAgICAgbWFyZ2luLXRvcDogLTAuMjVlbTtcbiAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XG4gICAgfVxuXG4gICAgLmNhbWVyYS16b29tLXRodW1iIHtcbiAgICAgICAgYm94LXNoYWRvdzogMHB4IDBweCAwcHggMC4xNWVtIHJnYmEoMTAwLDI1NSwxMDAsMC43KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICBoZWlnaHQ6IDEuNWVtO1xuICAgICAgICB3aWR0aDogMS41ZW07XG4gICAgICAgIHRyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwgNTAlKTtcbiAgICAgICAgYm90dG9tOiAwJTtcbiAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XG4gICAgfVxuICAgIC5jYW1lcmEtem9vbS1zdHJldGNoIHtcbiAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XG4gICAgICAgIGxlZnQ6IC0xZW07XG4gICAgICAgIHRvcDogLTFlbTtcbiAgICAgICAgcmlnaHQ6IC0xZW07XG4gICAgICAgIGJvdHRvbTogLTFlbTtcbiAgICB9XG4gICAgLmNhbWVyYS1waG90by13cmFwcGVyIHtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMGVtLDBlbSlzY2FsZSgxKTtcbiAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDMwMG1zLCB3aWR0aCAzMDBtcywgaGVpZ2h0IDMwMG1zLCBvcGFjaXR5IDMwMG1zLCBsZWZ0IDMwMG1zLCBib3R0b20gMzAwbXM7XG4gICAgICAgIG92ZXJmbG93OiB2aXNpYmxlO1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGxlZnQ6IDA7XG4gICAgICAgIGJveC1zaGFkb3c6IC0xcHggMHB4IDBweCByZ2JhKDI1NSwyNTUsMjU1LC41KTtcbiAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICB3aWR0aDogMy41ZW07XG4gICAgICAgIGhlaWdodDogMy41ZW07XG4gICAgICAgIG9wYWNpdHk6IDAuODU7XG4gICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDAlIDUwJTtcbiAgICB9XG4gICAgLmNhbWVyYS1waG90by13cmFwcGVyLmFjdGl2ZTo6YWZ0ZXIge1xuICAgICAgICBjb250ZW50OiBcIiBcIjtcbiAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XG4gICAgICAgIHRvcDowO1xuICAgICAgICBib3R0b206MDtcbiAgICAgICAgbGVmdDowO1xuICAgICAgICByaWdodDowO1xuICAgICAgICBiYWNrZ3JvdW5kOnJnYmEoMTAwLDI1NSwxMDAsMC4zNSk7XG4gICAgfVxuICAgIC5jYW1lcmEtcGhvdG8ge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcbiAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDMwMG1zLCBvcGFjaXR5IDMwMG1zO1xuICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDApdHJhbnNsYXRlKDBweCwwcHgpO1xuICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiAwJSA1MCU7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XG4gICAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O1xuICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcbiAgICAgICAgei1pbmRleDowO1xuICAgIH1cbiAgICAuY2FtZXJhLXBob3RvLXJlbW92ZSB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6cmdiYSgyNTUsMCwwLDAuNSk7XG4gICAgICAgIGJveC1zaGFkb3c6ICAwcHggNXB4IDEwcHggcmdiYSgwLDAsMCwwLjUpO1xuICAgICAgICB0ZXh0LXNoYWRvdzogIDBweCAwcHggMXB4IGJsYWNrO1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsMC41KTtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjpyZ2JhKDIwMCwyMDAsMjAwLC44KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICB0ZXh0LWFsaWduOmNlbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDMwMG1zO1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTEwMCUpO1xuICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcbiAgICAgICAgei1pbmRleDoxO1xuICAgICAgICBmb250LXdlaWdodDpib2xkO1xuICAgICAgICB3aWR0aDoxMDAlO1xuICAgICAgICBoZWlnaHQ6IGF1dG87XG4gICAgICAgIHRvcDogMC4wNWVtO1xuICAgICAgICByaWdodDogMC4wNWVtO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgIGhlaWdodDogMS41ZW07XG4gICAgICAgIHdpZHRoOiAxLjVlbTtcbiAgICB9XG5gO1xuIiwiXG5pbXBvcnQge2h0bWx9IGZyb20gJy4vbXVsdGljYW1lcmEuaHRtbCc7XG5pbXBvcnQge2Nzc30gZnJvbSAnLi9tdWx0aWNhbWVyYS5jc3MnO1xuXG5pbnRlcmZhY2UgTXVsdGlDYW1lcmFDb25maWcge1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE11bHRpQ2FtZXJhSW1nIHtcbiAgICBkYXRhOiBzdHJpbmc7XG4gICAgd2lkdGg6bnVtYmVyO1xuICAgIGhlaWdodDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVzZVBob3RvRXZlbnQgZXh0ZW5kcyBDdXN0b21FdmVudCB7XG4gICAgZGV0YWlsOiBNdWx0aUNhbWVyYUltZ1tdO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBDYW5jZWxFdmVudCBleHRlbmRzIEN1c3RvbUV2ZW50IHtcbiAgICBkZXRhaWw6IE11bHRpQ2FtZXJhSW1nW107XG59XG5leHBvcnQgaW50ZXJmYWNlIFRvb2tQaG90b0V2ZW50IGV4dGVuZHMgQ3VzdG9tRXZlbnQge1xuICAgIGRldGFpbDogTXVsdGlDYW1lcmFJbWc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTXVsdGlDYW1lcmFFdmVudHMge1xuICAgIHVzZXBob3RvczogIFVzZVBob3RvRXZlbnQ7XG4gICAgY2FuY2VsOiBDYW5jZWxFdmVudDtcbiAgICB0b29rcGhvdG86ICBUb29rUGhvdG9FdmVudDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNdWx0aUNhbWVyYUltYWdlIGV4dGVuZHMgTXVsdGlDYW1lcmFJbWcge1xuICAgIHdyYXBwZXI/OiBIVE1MRWxlbWVudDtcbiAgICBlbGVtZW50PzogSFRNTEVsZW1lbnQ7XG4gICAgcmVtb3ZlZD86IGJvb2xlYW47XG4gICAgeD86IG51bWJlcjtcbn1cblxuZXhwb3J0IHR5cGUgTXVsdGlDYW1lcmFFbGVtZW50cyA9XG4gICAgICAgICdvdmVybGF5JyB8XG4gICAgICAgICd6b29tUGx1cycgfFxuICAgICAgICAnem9vbU1pbnVzJyB8XG4gICAgICAgICd6b29tVGh1bWInIHxcbiAgICAgICAgJ3pvb21CRycgfFxuICAgICAgICAnem9vbUJHV3JhcHBlcicgfFxuICAgICAgICAncmV2ZXJzZUNhbWVyYScgfFxuICAgICAgICAnY2FuY2VsJyB8XG4gICAgICAgICd0YWtlUGhvdG8nIHxcbiAgICAgICAgJ3VzZVBob3RvcycgfFxuICAgICAgICAnYm90dG9tVG9vbGJhcicgfFxuICAgICAgICAndG9wSW5kaWNhdG9yVGV4dCcgfFxuICAgICAgICAnYm90dG9tSW5kaWNhdG9yVGV4dCcgfFxuICAgICAgICAnbGVmdEluZGljYXRvclRleHQnIHxcbiAgICAgICAgJ3JpZ2h0SW5kaWNhdG9yVGV4dCcgfFxuICAgICAgICAncGhvdG9PdmVybGF5JyB8XG4gICAgICAgICdwaG90b092ZXJsYXlCYWNrZ3JvdW5kJyB8XG4gICAgICAgICdiYWNrJztcblxuZXhwb3J0IGNsYXNzIE11bHRpQ2FtZXJhIHtcbiAgICBfZWxlbWVudDogSFRNTEVsZW1lbnQ7XG4gICAgX29wZXJhdGlvbnM6IFByb21pc2U8YW55PltdO1xuICAgIF9lbGVtZW50czoge1trZXkgaW4gTXVsdGlDYW1lcmFFbGVtZW50c106IEhUTUxFbGVtZW50fTtcbiAgICBfZW1Ub1B4OiBudW1iZXI7XG4gICAgX3Nob3c6IE11bHRpQ2FtZXJhQ29uZmlnIHwgYm9vbGVhbjtcbiAgICBfcmVhZHk6IGJvb2xlYW47XG4gICAgX3Rha2luZ1BpY3R1cmU6IGJvb2xlYW47XG4gICAgX3Nob3dpbmdQaG90b092ZXJsYXk6IE11bHRpQ2FtZXJhSW1hZ2UgfCBmYWxzZTtcbiAgICBfaW1hZ2VzOiBNdWx0aUNhbWVyYUltYWdlW10gPSBbXTtcbiAgICBfYWN0aXZlUGhvdG86IE11bHRpQ2FtZXJhSW1hZ2U7XG4gICAgX2Zyb250Q2FtZXJhOiBib29sZWFuO1xuICAgIF9tYXhab29tOiBudW1iZXIgPSA1O1xuICAgIF9taW5ab29tOiBudW1iZXIgPSAxO1xuICAgIF96b29tOiBudW1iZXIgPSAxO1xuICAgIF90b3VjaFN0YXRlOiB7XG4gICAgICAgIHR5cGU6IE11bHRpQ2FtZXJhWyd0b3VjaFR5cGVzJ11ba2V5b2YgTXVsdGlDYW1lcmFbJ3RvdWNoVHlwZXMnXV07XG4gICAgICAgIHpvb20/OiBudW1iZXI7XG4gICAgICAgIHhTdGFydD86IG51bWJlcjtcbiAgICAgICAgeVN0YXJ0PzogbnVtYmVyO1xuICAgICAgICB0YXJnZXQ/OiBIVE1MRWxlbWVudDtcbiAgICAgICAgc3RhcnRFdmVudD86IEV2ZW50O1xuICAgICAgICBwbHVzVGltZXI/OiBhbnk7XG4gICAgICAgIG1pbnVzVGltZXI/OiBhbnk7XG4gICAgICAgIHN0YXJ0cz86IHtsZW5ndGg6IG51bWJlciwgW2tleTogbnVtYmVyXToge3g6IG51bWJlcjsgeTpudW1iZXI7fX07XG4gICAgICAgIG9yZGVyPzogbnVtYmVyW11cbiAgICAgICAgbm90X2NsaWNrPzogYm9vbGVhbjtcbiAgICB9O1xuICAgIF9ldmVudHM6IHtcbiAgICAgICAgW2tleSBpbiBrZXlvZiBNdWx0aUNhbWVyYUV2ZW50c106ICgoZXZlbnQ6IE11bHRpQ2FtZXJhRXZlbnRzW2tleV0pID0+ICh2b2lkIHwgbnVsbCB8IHVuZGVmaW5lZCB8IGJvb2xlYW4pKVtdXG4gICAgfSA9IHtcbiAgICAgICAgdXNlcGhvdG9zOiBbXSxcbiAgICAgICAgY2FuY2VsOiBbXSxcbiAgICAgICAgdG9va3Bob3RvOiBbXVxuICAgIH07XG4gICAgXG4gICAgY29uc3RydWN0b3IgKCkge1xuICAgICAgICBNdWx0aUNhbWVyYS5fY2FtZXJhID0gdGhpcztcblxuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fZWxlbWVudCA9IChNdWx0aUNhbWVyYS5fdGVtcGxhdGUgYXMgSFRNTEVsZW1lbnQpLmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgY29uc3Qge292ZXJsYXksIHRha2VQaG90bywgYmFjaywgY2FuY2VsLCB1c2VQaG90b3N9ID0gdGhpcy5fZWxlbWVudHMgPSB7XG4gICAgICAgICAgICBvdmVybGF5OiBlbGVtZW50LFxuICAgICAgICAgICAgem9vbVBsdXM6IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhbWVyYS16b29tLXBsdXMnKSxcbiAgICAgICAgICAgIHpvb21NaW51czogZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FtZXJhLXpvb20tbWludXMnKSxcbiAgICAgICAgICAgIHpvb21UaHVtYjogZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FtZXJhLXpvb20tdGh1bWInKSxcbiAgICAgICAgICAgIHpvb21CRzogZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FtZXJhLXpvb20tYmFja2dyb3VuZCcpLFxuICAgICAgICAgICAgem9vbUJHV3JhcHBlcjogZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FtZXJhLXpvb20tYmFja2dyb3VuZC13cmFwcGVyJyksXG4gICAgICAgICAgICByZXZlcnNlQ2FtZXJhOiBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYW1lcmEtcmV2ZXJzZScpLFxuICAgICAgICAgICAgY2FuY2VsOiBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYW1lcmEtY2FuY2VsJyksXG4gICAgICAgICAgICB0YWtlUGhvdG86IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhbWVyYS10YWtlLXBob3RvJyksXG4gICAgICAgICAgICB1c2VQaG90b3M6IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhbWVyYS11c2UtcGhvdG9zJyksXG4gICAgICAgICAgICBib3R0b21Ub29sYmFyOiBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYW1lcmEtYm90dG9tLXRvb2xiYXInKSxcbiAgICAgICAgICAgIHRvcEluZGljYXRvclRleHQ6IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhbWVyYS1pbmRpY2F0b3IudG9wIC5jYW1lcmEtaW5kaWNhdG9yLXRleHQnKSxcbiAgICAgICAgICAgIGJvdHRvbUluZGljYXRvclRleHQ6IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhbWVyYS1pbmRpY2F0b3IuYm90dG9tIC5jYW1lcmEtaW5kaWNhdG9yLXRleHQnKSxcbiAgICAgICAgICAgIGxlZnRJbmRpY2F0b3JUZXh0OiBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYW1lcmEtaW5kaWNhdG9yLmxlZnQgLmNhbWVyYS1pbmRpY2F0b3ItdGV4dCcpLFxuICAgICAgICAgICAgcmlnaHRJbmRpY2F0b3JUZXh0OiBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYW1lcmEtaW5kaWNhdG9yLnJpZ2h0IC5jYW1lcmEtaW5kaWNhdG9yLXRleHQnKSxcbiAgICAgICAgICAgIHBob3RvT3ZlcmxheTogZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FtZXJhLXBob3RvLW92ZXJsYXknKSxcbiAgICAgICAgICAgIHBob3RvT3ZlcmxheUJhY2tncm91bmQ6IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhbWVyYS1waG90by1vdmVybGF5LWJhY2tncm91bmQnKSxcbiAgICAgICAgICAgIGJhY2s6IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhbWVyYS1waG90by1vdmVybGF5LXRleHQuYmFjaycpXG4gICAgICAgIH0sXG4gICAgICAgIGVtVGVzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBlbVRlc3Quc3R5bGUud2lkdGggPSBlbVRlc3Quc3R5bGUuaGVpZ2h0ID0gJzFlbSc7XG4gICAgICAgIGVtVGVzdC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIGVtVGVzdC5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgICAgICB0aGlzLl9lbGVtZW50LmFwcGVuZENoaWxkKGVtVGVzdCk7XG4gICAgICAgIHRoaXMuX2VtVG9QeCA9IGVtVGVzdC5jbGllbnRXaWR0aDtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmVDaGlsZChlbVRlc3QpO1xuICAgICAgICBjb25zb2xlLmVycm9yKGVsZW1lbnQpO1xuICAgICAgICBjb25zb2xlLmVycm9yKG92ZXJsYXkpO1xuXG4gICAgICAgIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICB0aGlzLl9yZXNldCgpO1xuICAgICAgICB0aGlzLl9vcGVyYXRpb25zID0gW107XG4gICAgICAgIHRoaXMuX29uRGV2aWNlUmVhZHkgPSB0aGlzLl9vbkRldmljZVJlYWR5LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX29uT3JpZW50YXRpb25DaGFuZ2UgPSB0aGlzLl9vbk9yaWVudGF0aW9uQ2hhbmdlLmJpbmQodGhpcyk7XG5cbiAgICAgICAgY2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5fb25DYW5jZWxDbGljaygpLCB0cnVlKTtcbiAgICAgICAgdXNlUGhvdG9zLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5fb25Vc2VQaG90b3NDbGljaygpLCB0cnVlKTtcbiAgICAgICAgb3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIChldmVudDogTW91c2VFdmVudCAmIFRvdWNoRXZlbnQpID0+IHRoaXMuX29uT3ZlcmxheVRvdWNoRW5kKGV2ZW50KSwgdHJ1ZSk7XG4gICAgICAgIGJhY2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9vblBob3RvT3ZlcmxheUJhY2tDbGljaygpLCB0cnVlKTtcbiAgICAgICAgb3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCAoZXZlbnQ6IE1vdXNlRXZlbnQgJiBUb3VjaEV2ZW50KSA9PiB0aGlzLl9vbk92ZXJsYXlUb3VjaE1vdmUoZXZlbnQpLCB0cnVlKTtcbiAgICAgICAgb3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgKGV2ZW50OiBNb3VzZUV2ZW50ICYgVG91Y2hFdmVudCkgPT4gdGhpcy5fb25PdmVybGF5VG91Y2hTdGFydChldmVudCksIHRydWUpO1xuICAgICAgICBvdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJywgKGV2ZW50OiBNb3VzZUV2ZW50ICYgVG91Y2hFdmVudCkgPT4gdGhpcy5fb25PdmVybGF5VG91Y2hDYW5jZWwoZXZlbnQpLCB0cnVlKTtcbiAgICAgICAgdGFrZVBob3RvLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCAoKSA9PiB0aGlzLl9vblRha2VQaG90b1RyYW5zaXRpb25FbmQoKSk7XG5cbiAgICAgICAgLy9UT0RPIGNvbnNpZGVyIGFkZCBpbiBzaG93IHJlbW92ZSBldmVudGxpc3RlbmVyIGluIGhpZGVcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX29uT3JpZW50YXRpb25DaGFuZ2UpO1xuXG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93WydkZXZpY2UnXSA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHdpbmRvd1snZGV2aWNlJ10uY29yZG92YSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZXJlYWR5JywgdGhpcy5fb25EZXZpY2VSZWFkeSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9vbkRldmljZVJlYWR5KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhZGRFdmVudExpc3RlbmVyPEEgZXh0ZW5kcyBrZXlvZiBNdWx0aUNhbWVyYUV2ZW50cyA9IGtleW9mIE11bHRpQ2FtZXJhRXZlbnRzPiAobmFtZTogQSwgZm46ICgoZXZlbnQ6IE11bHRpQ2FtZXJhRXZlbnRzW0FdKSA9PiAodm9pZCB8IG51bGwgfCB1bmRlZmluZWQgfCBib29sZWFuKSkpIHtcbiAgICAgICAgKHRoaXMuX2V2ZW50c1tuYW1lXSBhcyBhbnkpLnB1c2goZm4gYXMgKGV2ZW50OiBFdmVudCkgPT4gYW55KTtcbiAgICB9XG5cbiAgICByZW1vdmVFdmVudExpc3RlbmVyPEEgZXh0ZW5kcyBrZXlvZiBNdWx0aUNhbWVyYUV2ZW50cyA9IGtleW9mIE11bHRpQ2FtZXJhRXZlbnRzPiAobmFtZTogQSwgZm46ICgoZXZlbnQ6IE11bHRpQ2FtZXJhRXZlbnRzW0FdKSA9PiAodm9pZCB8IG51bGwgfCB1bmRlZmluZWQgfCBib29sZWFuKSkpIHtcbiAgICAgICAgY29uc3QgZXZlbnRzID0gdGhpcy5fZXZlbnRzW25hbWVdLFxuICAgICAgICAgICAgaW5kZXggPSAoZXZlbnRzIGFzIGFueSkuaW5kZXhPZihmbiBhcyAoZXZlbnQ6IEV2ZW50KSA9PiBhbnkpO1xuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICBldmVudHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRpc3BhdGNoRXZlbnQ8QSBleHRlbmRzIGtleW9mIE11bHRpQ2FtZXJhRXZlbnRzPihldmVudDogTXVsdGlDYW1lcmFFdmVudHNbQV0pIHtcbiAgICAgICAgY29uc3QgZXZlbnRzID0gdGhpcy5fZXZlbnRzW2V2ZW50LnR5cGVdO1xuICAgICAgICBmb3IgKHZhciBpPTAsbG49ZXZlbnRzLmxlbmd0aDtpPGxuO2krKykge1xuICAgICAgICAgICAgZXZlbnRzW2ldKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldFNjcmVlbkRpbWVuc2lvbnMgKCkge1xuICAgICAgICB2YXIge2hlaWdodCwgd2lkdGh9ID0gd2luZG93LnNjcmVlbjtcblxuICAgICAgICBpZiAodHlwZW9mIG9yaWVudGF0aW9uID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhcnNlSW50KGAke3dpbmRvdy5vcmllbnRhdGlvbn1gKSAvIDkwKSA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGhlaWdodCA9IHdpbmRvdy5zY3JlZW4ud2lkdGg7XG4gICAgICAgICAgICAgICAgd2lkdGggPSB3aW5kb3cuc2NyZWVuLmhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge3dpZHRoLCBoZWlnaHR9O1xuICAgIH1cblxuICAgIHNob3cgKGNvbmZpZzogTXVsdGlDYW1lcmFDb25maWcpIHtcbiAgICAgICAgY29uc3QgcHJldmlldyA9IHdpbmRvd1snQ2FtZXJhUHJldmlldyddLFxuICAgICAgICAgICAge292ZXJsYXl9ID0gdGhpcy5fZWxlbWVudHMsXG4gICAgICAgICAgICB7d2lkdGgsIGhlaWdodH0gPSB0aGlzLmdldFNjcmVlbkRpbWVuc2lvbnMoKTtcblxuICAgICAgICAvL1RPRE8gY2hlY2sgdGhpc1xuICAgICAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgaWYgKHRoaXMuX3Nob3cgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX3JlYWR5IHx8ICFwcmV2aWV3KSB7XG4gICAgICAgICAgICB0aGlzLl9zaG93ID0gY29uZmlnIHx8IHt9O1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fc2hvdyA9IHRydWU7XG5cbiAgICAgICAgcHJldmlldy5zdG9wQ2FtZXJhKFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NhbWVyYVByZXZpZXcuc3RvcENhbWVyYScsICdTVUNDRVNTJyk7XG4gICAgICAgICAgICAgICAgc3RhcnRDYW1lcmEoKTtcbiAgICAgICAgICAgIH0sIFxuICAgICAgICAgICAgKGVycjogRXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDYW1lcmFQcmV2aWV3LnN0b3BDYW1lcmEnLCBlcnIpO1xuICAgICAgICAgICAgICAgIHN0YXJ0Q2FtZXJhKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgZnVuY3Rpb24gc3RhcnRDYW1lcmEgKCkge1xuICAgICAgICAgICAgcHJldmlldy5zdGFydENhbWVyYSh7XG4gICAgICAgICAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIGNhbWVyYTogcHJldmlldy5DQU1FUkFfRElSRUNUSU9OLkJBQ0ssXG4gICAgICAgICAgICAgICAgICAgIHRvQmFjazogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdGFwUGhvdG86IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB0YXBGb2N1czogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHByZXZpZXdEcmFnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sIFxuICAgICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ2FtZXJhUHJldmlldy5zdGFydENhbWVyYScsICdTVUNDRVNTJyk7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIChkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgKGVycjogRXJyb3IpID0+IGNvbnNvbGUuZXJyb3IoJ0NhbWVyYVByZXZpZXcuc3RhcnRDYW1lcmEnLCBlcnIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGhpZGUgKCkge1xuICAgICAgICBjb25zdCBwcmV2aWV3ID0gd2luZG93WydDYW1lcmFQcmV2aWV3J10sXG4gICAgICAgICAgICB7b3ZlcmxheX0gPSB0aGlzLl9lbGVtZW50cztcbiAgICAgICAgaWYgKHRoaXMuX3JlYWR5ICYmIHRoaXMuX3Nob3cpIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3cgPSBmYWxzZTtcbiAgICAgICAgICAgIHdpbmRvd1snUHJvbWlzZSddLmFsbCh0aGlzLl9vcGVyYXRpb25zKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBwcmV2aWV3LnN0b3BDYW1lcmEoXG4gICAgICAgICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnRzLnBob3RvT3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgKGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZSBhcyBIVE1MRWxlbWVudCkuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NhbWVyYVByZXZpZXcuc3RvcENhbWVyYScsICdTVUNDRVNTJyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIChlcnI6IEVycm9yKSA9PiBjb25zb2xlLmVycm9yKCdDYW1lcmFQcmV2aWV3LnN0b3BDYW1lcmEnLCBlcnIpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdGFrZVBob3RvICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9yZWFkeSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvb2tQaWN0dXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICAgICAgICB7b3ZlcmxheX0gPSB0aGlzLl9lbGVtZW50cyxcbiAgICAgICAgICAgIHt3aWR0aCwgaGVpZ2h0fSA9IHRoaXMuZ2V0U2NyZWVuRGltZW5zaW9ucygpO1xuXG4gICAgICAgIHRvb2tQaWN0dXJlLmNsYXNzTmFtZSA9ICdjYW1lcmEtdG9vay1waWN0dXJlJztcblxuICAgICAgICBpZiAoIXRoaXMuX3Rha2luZ1BpY3R1cmUpIHtcbiAgICAgICAgICAgIHRoaXMuX3Rha2luZ1BpY3R1cmUgPSB0cnVlO1xuICAgICAgICAgICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKCd0YWtpbmctcGljdHVyZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgdG9va1BpY3R1cmUuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3Rha2luZ1BpY3R1cmUgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh0b29rUGljdHVyZS5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgdG9va1BpY3R1cmUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0b29rUGljdHVyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdG9va1BpY3R1cmUuc3R5bGUub3BhY2l0eSA9ICcwJyk7XG4gICAgICAgIG92ZXJsYXkuYXBwZW5kQ2hpbGQodG9va1BpY3R1cmUpO1xuXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSBuZXcgd2luZG93WydQcm9taXNlJ10oKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIHZhciByZXNvbHZlZCA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgcHJldmlldyA9IHdpbmRvd1snQ2FtZXJhUHJldmlldyddO1xuXG4gICAgICAgICAgICBwcmV2aWV3LnRha2VQaWN0dXJlKHt3aWR0aCwgaGVpZ2h0fSwgKGJhc2U2NDogc3RyaW5nW10pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbWFnZTogIE11bHRpQ2FtZXJhSW1hZ2UgPSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGBkYXRhOmltYWdlL2pwZztiYXNlNjQsJHtiYXNlNjRbMF19YCxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGhvdG9XcmFwcGVyID0gTXVsdGlDYW1lcmEuX3Bob3RvV3JhcHBlclRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudCxcbiAgICAgICAgICAgICAgICBwaG90b0VsZW1lbnQgPSBwaG90b1dyYXBwZXIucXVlcnlTZWxlY3RvcignLmNhbWVyYS1waG90bycpIGFzIEhUTUxFbGVtZW50LFxuICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnQgPSBwaG90b1dyYXBwZXIucXVlcnlTZWxlY3RvcignLmNhbWVyYS1waG90by1yZW1vdmUnKSBhcyBIVE1MRWxlbWVudCxcbiAgICAgICAgICAgICAgICB7Ym90dG9tVG9vbGJhcn0gPSB0aGlzLl9lbGVtZW50cyxcbiAgICAgICAgICAgICAgICB0b29rUGhvdG9FdmVudCA9IG5ldyBDdXN0b21FdmVudCgndG9va3Bob3RvJywge2RldGFpbDoge2RhdGE6IGltYWdlLmRhdGEsIHdpZHRoOmltYWdlLndpZHRoLCBoZWlnaHQ6aW1hZ2UuaGVpZ2h0fX0pO1xuXG4gICAgICAgICAgICAgICAgcGhvdG9FbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoXCIke2ltYWdlLmRhdGF9XCIpYDtcbiAgICAgICAgICAgICAgICBib3R0b21Ub29sYmFyLmluc2VydEJlZm9yZShwaG90b1dyYXBwZXIsIGJvdHRvbVRvb2xiYXIuY2hpbGROb2Rlc1swXSk7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcGhvdG9FbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgxKXRyYW5zbGF0ZSgwcHgsIDBweCknO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKDBweCknO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmVtb3ZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVtb3ZlSW1hZ2UoaW1hZ2UpO1xuICAgICAgICAgICAgICAgIH0sIHRydWUpO1xuICAgICAgICAgICAgICAgIHBob3RvV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgkZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2hvb3NlQWN0aXZlUGhvdG8oaW1hZ2UsICRldmVudCk7XG4gICAgICAgICAgICAgICAgfSwgdHJ1ZSk7XG5cblxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0b29rUGhvdG9FdmVudCk7XG5cbiAgICAgICAgICAgICAgICBpbWFnZS53cmFwcGVyID0gcGhvdG9XcmFwcGVyO1xuICAgICAgICAgICAgICAgIGltYWdlLmVsZW1lbnQgPSBwaG90b0VsZW1lbnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5faW1hZ2VzLnVuc2hpZnQoaW1hZ2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2RvTGF5b3V0KCk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXJlc29sdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAzMDAwKVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fb3BlcmF0aW9ucy5wdXNoKHByb21pc2UpO1xuICAgICAgICBwcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLl9vcGVyYXRpb25zLmluZGV4T2YocHJvbWlzZSk7XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fb3BlcmF0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfcmVtb3ZlSW1hZ2UgKGltYWdlOiBNdWx0aUNhbWVyYUltYWdlKSB7XG4gICAgICAgIGlmICghaW1hZ2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuX2ltYWdlcy5pbmRleE9mKGltYWdlKSxcbiAgICAgICAgICAgIHt3cmFwcGVyfSA9IGltYWdlO1xuXG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuX2ltYWdlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9pbWFnZXMubGVuZ3RoID09PSAwICYmIHRoaXMuX3Nob3dpbmdQaG90b092ZXJsYXkpIHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVQaG90b092ZXJsYXkoKTtcbiAgICAgICAgfVxuICAgICAgICBpbWFnZS5yZW1vdmVkID0gdHJ1ZTtcbiAgICAgICAgd3JhcHBlci5zdHlsZS50cmFuc2Zvcm0gPSBgJHt3cmFwcGVyLnN0eWxlLnRyYW5zZm9ybS5zcGxpdCgnc2NhbGUoMSknKVswXX1zY2FsZSgwKWA7XG4gICAgICAgIHdyYXBwZXIuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICAgICAgd3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHdyYXBwZXIucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnRzLmJvdHRvbVRvb2xiYXIucmVtb3ZlQ2hpbGQod3JhcHBlcilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2RvTGF5b3V0KCk7XG5cbiAgICAgICAgaWYgKGltYWdlID09PSB0aGlzLl9hY3RpdmVQaG90bykge1xuICAgICAgICAgICAgY29uc3QgbmV4dCA9IHRoaXMuX2ltYWdlc1tpbmRleF0gfHwgdGhpcy5faW1hZ2VzW3RoaXMuX2ltYWdlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGlmIChuZXh0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2hvb3NlQWN0aXZlUGhvdG8obmV4dCwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfY2hvb3NlQWN0aXZlUGhvdG8gKGltYWdlOiBNdWx0aUNhbWVyYUltYWdlLCBldmVudDogRXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50ICYmIGV2ZW50LnRhcmdldFsnY2xhc3NMaXN0J10gJiYgZXZlbnQudGFyZ2V0WydjbGFzc0xpc3QnXS5jb250YWlucygnY2FtZXJhLXBob3RvLXJlbW92ZScpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2FjdGl2ZVBob3RvKSB7XG4gICAgICAgICAgICB0aGlzLl9hY3RpdmVQaG90by53cmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fYWN0aXZlUGhvdG8gPSBpbWFnZTtcbiAgICAgICAgdGhpcy5fc2hvd1Bob3RvT3ZlcmxheSgpO1xuICAgICAgICBpbWFnZS53cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIH1cblxuICAgIF9oaWRlUGhvdG9PdmVybGF5ICgpIHtcbiAgICAgICAgY29uc3QgaW1hZ2UgPSB0aGlzLl9hY3RpdmVQaG90byxcbiAgICAgICAgICAgIHt3cmFwcGVyOiBvcmlnaW5hbH0gPSBpbWFnZSB8fCB7d3JhcHBlcjogdW5kZWZpbmVkfSxcbiAgICAgICAgICAgIHdyYXBwZXIgPSB0aGlzLl9zaG93aW5nUGhvdG9PdmVybGF5ICE9PSBmYWxzZSA/IHRoaXMuX3Nob3dpbmdQaG90b092ZXJsYXkud3JhcHBlciA6IHRoaXMuX3Nob3dpbmdQaG90b092ZXJsYXksXG4gICAgICAgICAgICByZWN0ID0gb3JpZ2luYWwgJiYgb3JpZ2luYWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgYXMgQ2xpZW50UmVjdCAmIHt4OiBudW1iZXJ9LFxuICAgICAgICAgICAgZWxlbWVudHMgPSB0aGlzLl9lbGVtZW50cztcblxuICAgICAgICBpZiAoIXdyYXBwZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIG9yaWdpbmFsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICB0aGlzLl9zaG93aW5nUGhvdG9PdmVybGF5ID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKHdyYXBwZXIucGFyZW50Tm9kZSA9PT0gZWxlbWVudHMucGhvdG9PdmVybGF5KSB7XG4gICAgICAgICAgICBjb25zdCBwaG90byA9IHdyYXBwZXIucXVlcnlTZWxlY3RvcignLmNhbWVyYS1waG90bycpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgZWxlbWVudHMuYmFjay5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgICAgICAgICAgZWxlbWVudHMucGhvdG9PdmVybGF5QmFja2dyb3VuZC5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgICAgICAgICAgd3JhcHBlci5zdHlsZS5oZWlnaHQgPSBudWxsO1xuICAgICAgICAgICAgd3JhcHBlci5zdHlsZS53aWR0aCA9IG51bGw7XG4gICAgICAgICAgICB3cmFwcGVyLnN0eWxlLmxlZnQgPSBgJHtyZWN0LnggLyB0aGlzLl9lbVRvUHh9ZW1gO1xuICAgICAgICAgICAgd3JhcHBlci5zdHlsZS5ib3R0b20gPSAnMGVtJztcbiAgICAgICAgICAgIHBob3RvLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgICAgICAgICBpZiAoaW1hZ2UucmVtb3ZlZCkge1xuICAgICAgICAgICAgICAgIHdyYXBwZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZSgwZW0sMGVtKXNjYWxlKDApJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAod3JhcHBlci5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5fc2hvd2luZ1Bob3RvT3ZlcmxheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMucGhvdG9PdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICBlbGVtZW50cy5waG90b092ZXJsYXkucmVtb3ZlQ2hpbGQod3JhcHBlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfc2hvd1Bob3RvT3ZlcmxheSAoKSB7XG4gICAgICAgIGNvbnN0IGltYWdlID0gIHRoaXMuX2FjdGl2ZVBob3RvLFxuICAgICAgICAgICAge3dpZHRoLCBoZWlnaHQsIHdyYXBwZXI6IG9yaWdpbmFsLCBkYXRhfSA9IGltYWdlLFxuICAgICAgICAgICAgcmVjdCA9IG9yaWdpbmFsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIGFzIENsaWVudFJlY3QgJiB7eDogbnVtYmVyfSxcbiAgICAgICAgICAgIGVsZW1lbnRzID0gdGhpcy5fZWxlbWVudHM7XG5cbiAgICAgICAgaWYgKHRoaXMuX3Nob3dpbmdQaG90b092ZXJsYXkpIHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVQaG90b092ZXJsYXkoKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge3dyYXBwZXJ9ID0gdGhpcy5fc2hvd2luZ1Bob3RvT3ZlcmxheSA9IHtkYXRhLCB3aWR0aCwgaGVpZ2h0LCB3cmFwcGVyOiBvcmlnaW5hbC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTEVsZW1lbnR9LFxuICAgICAgICAgICAgcGhvdG8gPSB3cmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5jYW1lcmEtcGhvdG8nKSBhcyBIVE1MRWxlbWVudCxcbiAgICAgICAgICAgIHJlbW92ZSA9IHdyYXBwZXIucXVlcnlTZWxlY3RvcignLmNhbWVyYS1waG90by1yZW1vdmUnKVxuXG4gICAgICAgIHdyYXBwZXIuc3R5bGUuYm94U2hhZG93ID0gJ25vbmUnO1xuICAgICAgICBlbGVtZW50cy5waG90b092ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgICAgICAgd3JhcHBlci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKDBlbSwwZW0pc2NhbGUoMSknXG4gICAgICAgIHdyYXBwZXIuc3R5bGUubGVmdCA9IGAke3JlY3QueC90aGlzLl9lbVRvUHh9ZW1gXG5cbiAgICAgICAgZWxlbWVudHMucGhvdG9PdmVybGF5LmFwcGVuZENoaWxkKHdyYXBwZXIpO1xuICAgICAgICB3cmFwcGVyLnJlbW92ZUNoaWxkKHJlbW92ZSlcblxuICAgICAgICBwaG90by5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgZWxlbWVudHMuYmFjay5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgICAgICAgICAgZWxlbWVudHMucGhvdG9PdmVybGF5QmFja2dyb3VuZC5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgICAgICAgICAgcGhvdG8uc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgICAgICAgICAgIHRoaXMuX2NlbnRlclBob3RvT3ZlcmxheSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfY2VudGVyUGhvdG9PdmVybGF5ICgpIHtcbiAgICAgICAgY29uc3QgZGltZW5zaW9ucyA9IHRoaXMuZ2V0U2NyZWVuRGltZW5zaW9ucygpLFxuICAgICAgICAgICAgY2xvbmVJbWFnZSA9IHRoaXMuX3Nob3dpbmdQaG90b092ZXJsYXk7XG4gICAgICAgIHZhciB7d2lkdGgsIGhlaWdodCwgd3JhcHBlcn0gPSBjbG9uZUltYWdlIHx8IHt3aWR0aDogdW5kZWZpbmVkLCBoZWlnaHQ6IHVuZGVmaW5lZCwgd3JhcHBlcjogdW5kZWZpbmVkfTtcbiAgICAgICAgdmFyIHNjYWxlOiBudW1iZXI7IFxuXG4gICAgICAgIGlmICh3aWR0aCA+IGRpbWVuc2lvbnMud2lkdGgpIHtcbiAgICAgICAgICAgIHNjYWxlID0gZGltZW5zaW9ucy53aWR0aCAvIHdpZHRoO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoZWlnaHQgPiBkaW1lbnNpb25zLmhlaWdodCkge1xuICAgICAgICAgICAgaWYgKCFzY2FsZSB8fCAoKGRpbWVuc2lvbnMuaGVpZ2h0IC8gaGVpZ2h0KSA+IHNjYWxlKSkge1xuICAgICAgICAgICAgICAgIHNjYWxlID0gZGltZW5zaW9ucy5oZWlnaHQgLyBoZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNjYWxlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNjYWxlID0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGN4ID0gKGRpbWVuc2lvbnMud2lkdGggLSB3aWR0aCAqIHNjYWxlKSAvIDIgLyB0aGlzLl9lbVRvUHgsXG4gICAgICAgICAgICBjeSA9IChkaW1lbnNpb25zLmhlaWdodCAtIGhlaWdodCAqIHNjYWxlKSAvIDIgLyB0aGlzLl9lbVRvUHg7XG5cbiAgICAgICAgd3JhcHBlci5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHQqc2NhbGV9cHhgO1xuICAgICAgICB3cmFwcGVyLnN0eWxlLndpZHRoID0gYCR7d2lkdGgqc2NhbGV9cHhgO1xuICAgICAgICB3cmFwcGVyLnN0eWxlLmxlZnQgPSBgJHtjeH1lbWA7XG4gICAgICAgIHdyYXBwZXIuc3R5bGUuYm90dG9tID0gYCR7Y3l9ZW1gO1xuICAgIH1cblxuICAgIGZvY3VzICh7eCwgeX06IHt4Om51bWJlciwgeTpudW1iZXJ9KSB7XG4gICAgICAgIGNvbnN0IHByZXZpZXcgPSB3aW5kb3dbJ0NhbWVyYVByZXZpZXcnXVxuICAgICAgICBpZiAodGhpcy5fcmVhZHkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYE11bHRpQ2FtZXJhLmZvY3VzKCR7W3gseV19KWApO1xuICAgICAgICAgICAgcHJldmlldy50YXBUb0ZvY3VzKHgsIHksICgpID0+IHt9LCAoZXJyOiBFcnJvcikgPT4gY29uc29sZS5lcnJvcignQ2FtZXJhUHJldmlldy50YXBUb0ZvY3VzJywgZXJyKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgc3dpdGNoQ2FtZXJhICgpIHtcbiAgICAgICAgY29uc3QgcHJldmlldyA9IHdpbmRvd1snQ2FtZXJhUHJldmlldyddO1xuICAgICAgICBpZiAodGhpcy5fcmVhZHkgJiYgcHJldmlldykge1xuICAgICAgICAgICAgd2luZG93WydQcm9taXNlJ10uYWxsKHRoaXMuX29wZXJhdGlvbnMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBuZXcgd2luZG93WydQcm9taXNlJ10oKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc29sdmVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHByZXZpZXcuc3dpdGNoQ2FtZXJhKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2Zyb250Q2FtZXJhID0gIXRoaXMuX2Zyb250Q2FtZXJhXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpvb20oMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIChlcnI6IEVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDYW1lcmFQcmV2aWV3LnN3aXRjaENhbWVyYScsIGVycilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgMzAwMClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vcGVyYXRpb25zLnB1c2gocHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLl9vcGVyYXRpb25zLmluZGV4T2YocHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29wZXJhdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgem9vbSAoem9vbTogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHByZXZpZXcgPSB3aW5kb3dbJ0NhbWVyYVByZXZpZXcnXTtcblxuICAgICAgICBpZiAoIXRoaXMuX3JlYWR5IHx8ICFwcmV2aWV3KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7X21heFpvb20sIF9taW5ab29tfSA9IHRoaXMsXG4gICAgICAgICAgICB7em9vbUJHLCB6b29tQkdXcmFwcGVyLCB6b29tVGh1bWJ9ID0gdGhpcy5fZWxlbWVudHMsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kUmVjdCA9IHpvb21CRy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICAgIGJhY2tncm91bmRIZWlnaHQgPSBiYWNrZ3JvdW5kUmVjdC5oZWlnaHQ7XG5cbiAgICAgICAgaWYgKHpvb20gIDwgX21pblpvb20pIHtcbiAgICAgICAgICAgIHpvb20gPSBfbWluWm9vbTtcbiAgICAgICAgfSBcblxuICAgICAgICBpZiAoem9vbSA+IF9tYXhab29tKSB7XG4gICAgICAgICAgICB6b29tID0gX21heFpvb207XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl96b29tID0gem9vbTtcblxuICAgICAgICBjb25zdCBkaXYgPSAoKHpvb20gLSAxKSAvICh0aGlzLl9tYXhab29tIC0gMSkpLFxuICAgICAgICAgICAgdG9wID0gZGl2ICogYmFja2dyb3VuZEhlaWdodDtcbiAgICAgICAgem9vbVRodW1iLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVZKCR7LXRvcH1weCl0cmFuc2xhdGUoLTUwJSwgNTAlKWA7XG4gICAgICAgICh6b29tQkdXcmFwcGVyLnN0eWxlIGFzIGFueSkud2Via2l0TWFza1Bvc2l0aW9uPWA1MCUgJHsoZGl2KjEwMCl9JWA7XG5cbiAgICAgICAgcHJldmlldy5zZXRab29tKHpvb20sICgpID0+IHt9LCAoZXJyOiBFcnJvcikgPT4gY29uc29sZS5lcnJvcignQ2FtZXJhUHJldmlldy5zZXRab29tJywgZXJyKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIF9kb0xheW91dCAoKSB7XG4gICAgICAgIGNvbnN0IGltYWdlcyA9IHRoaXMuX2ltYWdlcyxcbiAgICAgICAgICAgIHdpZHRoID0gMy41LFxuICAgICAgICAgICAgbG4gPSBpbWFnZXMubGVuZ3RoO1xuICAgICAgICBcbiAgICAgICAgdmFyIGltYWdlOiBNdWx0aUNhbWVyYUltYWdlLFxuICAgICAgICBpID0gMDtcblxuICAgICAgICBmb3IgKDtpPGxuO2krKykge1xuICAgICAgICAgICAgaW1hZ2UgPSBpbWFnZXNbaV07XG4gICAgICAgICAgICBpbWFnZS54ID0gaSAqIHdpZHRoO1xuICAgICAgICAgICAgaW1hZ2Uud3JhcHBlci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7KGkqd2lkdGgpfWVtLCAwZW0pc2NhbGUoMSlgO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIF9yZXNldCAoKSB7XG4gICAgICAgIGNvbnN0IHtib3R0b21Ub29sYmFyLCB6b29tVGh1bWIsIHpvb21CR1dyYXBwZXJ9ID0gdGhpcy5fZWxlbWVudHM7XG5cbiAgICAgICAgYm90dG9tVG9vbGJhci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgem9vbVRodW1iLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVZKDBweCl0cmFuc2xhdGUoLTUwJSwgNTAlKWA7XG4gICAgICAgICh6b29tQkdXcmFwcGVyLnN0eWxlIGFzIGFueSkud2Via2l0TWFza1Bvc2l0aW9uPWA1MCUgMCVgO1xuXG4gICAgICAgIHRoaXMuX2ltYWdlcyA9IFtdO1xuICAgICAgICB0aGlzLl90b3VjaFN0YXRlID0ge3R5cGU6IE11bHRpQ2FtZXJhLnRvdWNoVHlwZXMuTk9ORX07XG4gICAgICAgIHRoaXMuX2Zyb250Q2FtZXJhID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3pvb20gPSAxO1xuICAgICAgICB0aGlzLl9taW5ab29tID0gMTtcbiAgICAgICAgdGhpcy5fbWF4Wm9vbSA9IDU7XG4gICAgfVxuXG4gICAgX29uRGV2aWNlUmVhZHkgKCkge1xuICAgICAgICB0aGlzLl9yZWFkeSA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLl9zaG93KSB7XG4gICAgICAgICAgICBjb25zdCBzaG93ID0gdGhpcy5fc2hvdztcbiAgICAgICAgICAgIHRoaXMuX3Nob3cgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuc2hvdyhzaG93KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuem9vbSh0aGlzLl96b29tKTtcbiAgICAgICAgdGhpcy5fb25PcmllbnRhdGlvbkNoYW5nZSgpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdkZXZpY2VyZWFkeScsIHRoaXMuX29uRGV2aWNlUmVhZHkpO1xuICAgIH1cblxuICAgIF9vbk92ZXJsYXlUb3VjaFN0YXJ0IChldmVudDogVG91Y2hFdmVudCAmIHtwYWdlWDogbnVtYmVyLCBwYWdlWTogbnVtYmVyfSkge1xuICAgICAgICBjb25zdCB7em9vbVBsdXMsIHpvb21NaW51cywgcmV2ZXJzZUNhbWVyYSwgb3ZlcmxheX0gPSB0aGlzLl9lbGVtZW50cyxcbiAgICAgICAgICAgIGNsYXNzTGlzdCA9IGV2ZW50LnRhcmdldFsnY2xhc3NMaXN0J10gfHwge2NvbnRhaW5zOiAoKSA9PiBmYWxzZX0sXG4gICAgICAgICAgICBudW1fdG91Y2hlcyA9IGV2ZW50LnRvdWNoZXMubGVuZ3RoO1xuICAgICAgICB2YXIgdG91Y2hTdGF0ZSA9IHRoaXMuX3RvdWNoU3RhdGUsXG4gICAgICAgICAgICBwbHVzVGltZXI6ICgpID0+IGFueSxcbiAgICAgICAgICAgIG1pbnVzVGltZXI6ICgpID0+IGFueTtcblxuICAgICAgICBpZiAoY2xhc3NMaXN0LmNvbnRhaW5zKCdjYW1lcmEtem9vbS1wYXJ0JykgJiYgbnVtX3RvdWNoZXMgPT09IDEpIHtcbiAgICAgICAgICAgIHRvdWNoU3RhdGUgPSB0aGlzLl90b3VjaFN0YXRlID0ge1xuICAgICAgICAgICAgICAgIC4uLnRvdWNoU3RhdGUsXG4gICAgICAgICAgICAgICAgdHlwZTogTXVsdGlDYW1lcmEudG91Y2hUeXBlcy5EUkFHX1pPT01fVEhVTUIsXG4gICAgICAgICAgICAgICAgem9vbTogdGhpcy5fem9vbSxcbiAgICAgICAgICAgICAgICB4U3RhcnQ6IGV2ZW50LnBhZ2VYLFxuICAgICAgICAgICAgICAgIHlTdGFydDogZXZlbnQucGFnZVksXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQsXG4gICAgICAgICAgICAgICAgc3RhcnRFdmVudDogZXZlbnRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0ID09PSB6b29tUGx1cyAmJiBudW1fdG91Y2hlcyA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy5fb25ab29tUGx1c01vdXNlRG93bigpO1xuICAgICAgICAgICAgdG91Y2hTdGF0ZSA9IHRoaXMuX3RvdWNoU3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgLi4udG91Y2hTdGF0ZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBNdWx0aUNhbWVyYS50b3VjaFR5cGVzLkhPTERfWk9PTV9QTFVTLFxuICAgICAgICAgICAgICAgIHBsdXNUaW1lcjogc2V0VGltZW91dChwbHVzVGltZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uWm9vbVBsdXNNb3VzZURvd24oKTtcbiAgICAgICAgICAgICAgICAgICAgdG91Y2hTdGF0ZS5wbHVzVGltZXIgPSBzZXRUaW1lb3V0KHBsdXNUaW1lciwgMTAwKVxuICAgICAgICAgICAgICAgIH0sIDEwMClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0ID09PSB6b29tTWludXMgJiYgbnVtX3RvdWNoZXMgPT09IDEpIHtcbiAgICAgICAgICAgIHRoaXMuX29uWm9vbU1pbnVzTW91c2VEb3duKCk7XG4gICAgICAgICAgICB0b3VjaFN0YXRlID0gdGhpcy5fdG91Y2hTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAuLi50b3VjaFN0YXRlLFxuICAgICAgICAgICAgICAgIHR5cGU6IE11bHRpQ2FtZXJhLnRvdWNoVHlwZXMuSE9MRF9aT09NX01JTlVTLFxuICAgICAgICAgICAgICAgIG1pbnVzVGltZXI6IHNldFRpbWVvdXQobWludXNUaW1lciA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25ab29tTWludXNNb3VzZURvd24oKTtcbiAgICAgICAgICAgICAgICAgICAgdG91Y2hTdGF0ZS5taW51c1RpbWVyID0gc2V0VGltZW91dChtaW51c1RpbWVyLCAxMDApXG4gICAgICAgICAgICAgICAgfSwgMTAwKVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldCA9PT0gcmV2ZXJzZUNhbWVyYSAmJiBudW1fdG91Y2hlcyA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy5zd2l0Y2hDYW1lcmEoKTtcbiAgICAgICAgfSBlbHNlIGlmIChjbGFzc0xpc3QuY29udGFpbnMoJ2NhbWVyYS10YWtlLXBob3RvLXBhcnQnKSAmJiBudW1fdG91Y2hlcyA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy50YWtlUGhvdG8oKTtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQgPT09IG92ZXJsYXkpIHtcbiAgICAgICAgICAgIHRvdWNoU3RhdGUudHlwZSA9IE11bHRpQ2FtZXJhLnRvdWNoVHlwZXMuRFJBR19aT09NX0ZJTkdFUlM7XG4gICAgICAgICAgICB2YXIgdG91Y2hlcyA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzLFxuICAgICAgICAgICAgICAgIG9yZGVyOiBNdWx0aUNhbWVyYVsnX3RvdWNoU3RhdGUnXVsnb3JkZXInXSxcbiAgICAgICAgICAgICAgICBzdGFydHM6IE11bHRpQ2FtZXJhWydfdG91Y2hTdGF0ZSddWydzdGFydHMnXSxcbiAgICAgICAgICAgICAgICB0b3VjaDogVG91Y2g7XG4gICAgICAgICAgICBpZiAoIXRvdWNoU3RhdGUuc3RhcnRzKSB7XG4gICAgICAgICAgICAgICAgdG91Y2hTdGF0ZS5zdGFydHMgPSB7bGVuZ3RoOiAwfTtcbiAgICAgICAgICAgICAgICB0b3VjaFN0YXRlLm9yZGVyID0gW107XG4gICAgICAgICAgICAgICAgdG91Y2hTdGF0ZS56b29tID0gdGhpcy5fem9vbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0YXJ0cyA9IHRvdWNoU3RhdGUuc3RhcnRzO1xuICAgICAgICAgICAgb3JkZXIgPSB0b3VjaFN0YXRlLm9yZGVyO1xuICAgICAgICAgICAgZm9yICh2YXIgaT0wLGxuPXRvdWNoZXMubGVuZ3RoO2k8bG47aSsrKSB7XG4gICAgICAgICAgICAgICAgdG91Y2ggPSB0b3VjaGVzW2ldO1xuICAgICAgICAgICAgICAgIGlmICghc3RhcnRzW3RvdWNoLmlkZW50aWZpZXJdKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0c1t0b3VjaC5pZGVudGlmaWVyXSA9IHt4OiB0b3VjaC5wYWdlWCwgeTogdG91Y2gucGFnZVl9O1xuICAgICAgICAgICAgICAgICAgICBzdGFydHMubGVuZ3RoKys7XG4gICAgICAgICAgICAgICAgICAgIG9yZGVyLnB1c2godG91Y2guaWRlbnRpZmllcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgdG91Y2hTdGF0ZS5ub3RfY2xpY2sgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgX29uT3ZlcmxheVRvdWNoRW5kIChldmVudDogVG91Y2hFdmVudCAmIE1vdXNlRXZlbnQpIHtcbiAgICAgICAgdmFyIHRvdWNoU3RhdGUgPSB0aGlzLl90b3VjaFN0YXRlLFxuICAgICAgICAgICAge3R5cGV9ID0gdG91Y2hTdGF0ZTtcblxuICAgICAgICBpZiAodHlwZSA9PT0gTXVsdGlDYW1lcmEudG91Y2hUeXBlcy5IT0xEX1pPT01fUExVUykge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRvdWNoU3RhdGUucGx1c1RpbWVyKTtcbiAgICAgICAgICAgIHRvdWNoU3RhdGUgPSB7dHlwZTogTXVsdGlDYW1lcmEudG91Y2hUeXBlcy5OT05FfTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBNdWx0aUNhbWVyYS50b3VjaFR5cGVzLkhPTERfWk9PTV9NSU5VUykge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRvdWNoU3RhdGUubWludXNUaW1lcik7XG4gICAgICAgICAgICB0b3VjaFN0YXRlID0ge3R5cGU6IE11bHRpQ2FtZXJhLnRvdWNoVHlwZXMuTk9ORX07XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gTXVsdGlDYW1lcmEudG91Y2hUeXBlcy5EUkFHX1pPT01fRklOR0VSUykge1xuICAgICAgICAgICAgaWYgKCF0b3VjaFN0YXRlLm5vdF9jbGljaykge1xuICAgICAgICAgICAgICAgIHRoaXMuX29uT3ZlcmxheUNsaWNrKGV2ZW50IGFzIE1vdXNlRXZlbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB0b3VjaGVzID0gZXZlbnQuY2hhbmdlZFRvdWNoZXMsXG4gICAgICAgICAgICAgICAgc3RhcnRzID0gdG91Y2hTdGF0ZS5zdGFydHMsXG4gICAgICAgICAgICAgICAgb3JkZXIgPSB0b3VjaFN0YXRlLm9yZGVyO1xuXG4gICAgICAgICAgICB2YXIgdG91Y2g6IFRvdWNoO1xuICAgICAgICAgICAgZm9yICh2YXIgaT0wLGxuPXRvdWNoZXMubGVuZ3RoO2k8bG47aSsrKSB7XG4gICAgICAgICAgICAgICAgdG91Y2ggPSB0b3VjaGVzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChzdGFydHNbdG91Y2guaWRlbnRpZmllcl0pIHtcbiAgICAgICAgICAgICAgICAgICAgb3JkZXIuc3BsaWNlKG9yZGVyLmluZGV4T2YodG91Y2guaWRlbnRpZmllciksIDEpO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgc3RhcnRzW3RvdWNoLmlkZW50aWZpZXJdO1xuICAgICAgICAgICAgICAgICAgICBzdGFydHMubGVuZ3RoLS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXJ0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0b3VjaFN0YXRlID0ge3R5cGU6IE11bHRpQ2FtZXJhLnRvdWNoVHlwZXMuTk9ORX1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvdWNoU3RhdGUgPSB7dHlwZTogTXVsdGlDYW1lcmEudG91Y2hUeXBlcy5OT05FfVxuICAgICAgICAgICAgdG91Y2hTdGF0ZS50eXBlID0gTXVsdGlDYW1lcmEudG91Y2hUeXBlcy5OT05FO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3RvdWNoU3RhdGUgPSB0b3VjaFN0YXRlO1xuICAgIH1cbiAgICBfb25PdmVybGF5VG91Y2hDYW5jZWwgKGV2ZW50OiBUb3VjaEV2ZW50ICYgTW91c2VFdmVudCkge1xuICAgICAgICB0aGlzLl9vbk92ZXJsYXlUb3VjaEVuZChldmVudCk7XG4gICAgfVxuICAgIF9vbk92ZXJsYXlUb3VjaE1vdmUgKGV2ZW50OiBUb3VjaEV2ZW50ICYgTW91c2VFdmVudCkge1xuICAgICAgICB2YXIgdG91Y2hTdGF0ZSA9IHRoaXMuX3RvdWNoU3RhdGUsXG4gICAgICAgICAgICB7dHlwZX0gPSB0b3VjaFN0YXRlO1xuXG4gICAgICAgIGlmICh0eXBlID09PSBNdWx0aUNhbWVyYS50b3VjaFR5cGVzLkRSQUdfWk9PTV9USFVNQikge1xuICAgICAgICAgICAgY29uc3QgcGFnZVkgPSBldmVudC5wYWdlWSAtIHRvdWNoU3RhdGUueVN0YXJ0LFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQgPSB0aGlzLl9lbGVtZW50cy56b29tQkcsXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZFJlY3QgPSBiYWNrZ3JvdW5kLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRIZWlnaHQgPSBiYWNrZ3JvdW5kUmVjdC5oZWlnaHQ7XG5cbiAgICAgICAgICAgIHRoaXMuem9vbSh0b3VjaFN0YXRlLnpvb20gLSBwYWdlWSAvIGJhY2tncm91bmRIZWlnaHQgKiAzKTtcblxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gTXVsdGlDYW1lcmEudG91Y2hUeXBlcy5EUkFHX1pPT01fRklOR0VSUykge1xuICAgICAgICAgICAgY29uc3Qge3N0YXJ0cywgb3JkZXJ9ID0gdG91Y2hTdGF0ZSxcbiAgICAgICAgICAgICAgICBzdGFydDEgPSBzdGFydHNbb3JkZXJbMF1dLFxuICAgICAgICAgICAgICAgIHN0YXJ0MiA9IHN0YXJ0c1tvcmRlclsxXV0sXG4gICAgICAgICAgICAgICAgdG91Y2hlcyA9IGV2ZW50LnRvdWNoZXMsXG4gICAgICAgICAgICAgICAgZGltZW5zaW9ucyA9IHRoaXMuZ2V0U2NyZWVuRGltZW5zaW9ucygpLFxuICAgICAgICAgICAgICAgIHt3aWR0aCwgaGVpZ2h0fSA9IGRpbWVuc2lvbnM7XG4gICAgICAgICAgICB2YXIgY3VycmVudDE6IFRvdWNoLFxuICAgICAgICAgICAgICAgIGN1cnJlbnQyOiBUb3VjaCxcbiAgICAgICAgICAgICAgICBzdGFydFgxOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgc3RhcnRYMjogbnVtYmVyLFxuICAgICAgICAgICAgICAgIHN0YXJ0WTE6IG51bWJlcixcbiAgICAgICAgICAgICAgICBzdGFydFkyOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgY3VycmVudFgxOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgY3VycmVudFgyOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgY3VycmVudFkxOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgY3VycmVudFkyOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgZGlzdDE6IG51bWJlcixcbiAgICAgICAgICAgICAgICBkaXN0MjogbnVtYmVyLFxuICAgICAgICAgICAgICAgIHRvdWNoOiBUb3VjaCxcbiAgICAgICAgICAgICAgICBkaWZmOiBudW1iZXI7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGk9MCxsbj10b3VjaGVzLmxlbmd0aDtpPGxuO2krKykge1xuICAgICAgICAgICAgICAgIHRvdWNoID0gdG91Y2hlc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAodG91Y2guaWRlbnRpZmllciA9PT0gb3JkZXJbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudDEgPSB0b3VjaDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodG91Y2guaWRlbnRpZmllciA9PT0gb3JkZXJbMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudDIgPSB0b3VjaDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHN0YXJ0MSkge1xuICAgICAgICAgICAgICAgIHN0YXJ0WDEgPSBzdGFydDEueDtcbiAgICAgICAgICAgICAgICBzdGFydFkxID0gc3RhcnQxLnk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3VycmVudDEpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50WDEgPSBjdXJyZW50MS5wYWdlWDtcbiAgICAgICAgICAgICAgICBjdXJyZW50WTEgPSBjdXJyZW50MS5wYWdlWTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0b3VjaFN0YXRlLm5vdF9jbGljayAmJiBzdGFydDEgJiYgY3VycmVudDEpIHtcbiAgICAgICAgICAgICAgICBkaXN0MSA9IE1hdGguc3FydCgoKHN0YXJ0WDEgLSBjdXJyZW50WDEpICoqIDIpICsgKChzdGFydFkxIC0gY3VycmVudFkxKSAqKiAyKSk7XG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRpc3QxKSA+IDcpIHtcbiAgICAgICAgICAgICAgICAgICAgdG91Y2hTdGF0ZS5ub3RfY2xpY2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHN0YXJ0MSAmJiBzdGFydDIgJiYgY3VycmVudDEgJiYgY3VycmVudDIpIHtcbiAgICAgICAgICAgICAgICBzdGFydFgyID0gc3RhcnQyLng7XG4gICAgICAgICAgICAgICAgc3RhcnRZMiA9IHN0YXJ0Mi55O1xuICAgICAgICAgICAgICAgIGN1cnJlbnRYMiA9IGN1cnJlbnQyLnBhZ2VYO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRZMiA9IGN1cnJlbnQyLnBhZ2VZO1xuXG4gICAgICAgICAgICAgICAgZGlzdDEgPSBNYXRoLnNxcnQoKChzdGFydFgyIC0gc3RhcnRYMSkgKiogMikgKyAoKHN0YXJ0WTIgLSBzdGFydFkxKSAqKiAyKSk7XG4gICAgICAgICAgICAgICAgZGlzdDIgPSBNYXRoLnNxcnQoKChjdXJyZW50WDIgLSBjdXJyZW50WDEpICoqIDIpICsgKChjdXJyZW50WTIgLSBjdXJyZW50WTEpICoqIDIpKTtcblxuICAgICAgICAgICAgICAgIGRpZmYgPSBkaXN0MiAtIGRpc3QxO1xuXG4gICAgICAgICAgICAgICAgdGhpcy56b29tKHRvdWNoU3RhdGUuem9vbSArIGRpZmYgLyBNYXRoLm1pbih3aWR0aCxoZWlnaHQpICogNik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfb25PcmllbnRhdGlvbkNoYW5nZSAoKSB7XG4gICAgICAgIGNvbnN0IHByZXZpZXcgPSB3aW5kb3dbJ0NhbWVyYVByZXZpZXcnXSxcbiAgICAgICAgICAgIGRpbWVuc2lvbnMgPSB0aGlzLmdldFNjcmVlbkRpbWVuc2lvbnMoKSxcbiAgICAgICAgICAgIHt3aWR0aCwgaGVpZ2h0fSA9IGRpbWVuc2lvbnM7XG4gICAgICAgIGlmICh0aGlzLnNob3cgJiYgdGhpcy5fcmVhZHkgJiYgcHJldmlldykge1xuICAgICAgICAgICAgcHJldmlldy5zZXRQcmV2aWV3U2l6ZShkaW1lbnNpb25zLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZG9uZURpbWVuc2lvbnMgPSB0aGlzLmdldFNjcmVlbkRpbWVuc2lvbnMoKTtcbiAgICAgICAgICAgICAgICBpZiAoZG9uZURpbWVuc2lvbnMud2lkdGggIT09IHdpZHRoIHx8IGRvbmVEaW1lbnNpb25zLmhlaWdodCAhPT0gaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uT3JpZW50YXRpb25DaGFuZ2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAoZXJyOiBFcnJvcikgPT4gY29uc29sZS5lcnJvcignQ2FtZXJhUHJldmlldy5zZXRQcmV2aWV3U2l6ZScsIGVycikpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9zaG93aW5nUGhvdG9PdmVybGF5KSB7XG4gICAgICAgICAgICB0aGlzLl9jZW50ZXJQaG90b092ZXJsYXkoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9vbk92ZXJsYXlDbGljayAoe3BhZ2VYOiB4LCBwYWdlWTogeX0pIHtcbiAgICAgICAgdGhpcy5mb2N1cyh7eCwgeX0pO1xuICAgIH1cblxuICAgIF9vblJldmVyc2VDYW1lcmFDbGljayAoKSB7XG4gICAgICAgIHRoaXMuc3dpdGNoQ2FtZXJhKCk7XG4gICAgfVxuXG4gICAgX29uWm9vbVBsdXNNb3VzZURvd24gKCkge1xuICAgICAgICBpZiAoKHRoaXMuX3pvb20gKyAwLjE1KSA8PSB0aGlzLl9tYXhab29tKSB7XG4gICAgICAgICAgICB0aGlzLnpvb20odGhpcy5fem9vbSArIDAuMTUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy56b29tKHRoaXMuX21heFpvb20pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX29uWm9vbU1pbnVzTW91c2VEb3duICgpIHtcbiAgICAgICAgaWYgKCh0aGlzLl96b29tIC0gMC4xNSkgPj0gdGhpcy5fbWluWm9vbSkge1xuICAgICAgICAgICAgdGhpcy56b29tKHRoaXMuX3pvb20gLSAwLjE1KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuem9vbSh0aGlzLl9taW5ab29tKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9vblRha2VQaG90b1RyYW5zaXRpb25FbmQgKCkge1xuICAgICAgICBjb25zdCB7b3ZlcmxheX0gPSB0aGlzLl9lbGVtZW50cztcbiAgICAgICAgaWYgKG92ZXJsYXkgJiYgb3ZlcmxheS5jbGFzc0xpc3QgJiYgb3ZlcmxheS5jbGFzc0xpc3QuY29udGFpbnMoJ3Rha2luZy1waWN0dXJlJykpIHtcbiAgICAgICAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgndGFraW5nLXBpY3R1cmUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9vblBob3RvT3ZlcmxheUJhY2tDbGljayAoKSB7XG4gICAgICAgIHRoaXMuX2hpZGVQaG90b092ZXJsYXkoKTtcbiAgICB9XG5cbiAgICBfb25DYW5jZWxDbGljayAoKSB7XG4gICAgICAgIGlmICh0aGlzLl9zaG93KSB7XG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgIHdpbmRvd1snUHJvbWlzZSddLmFsbCh0aGlzLl9vcGVyYXRpb25zKVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnY2FuY2VsJywge2RldGFpbDogW119KTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc2V0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9vblVzZVBob3Rvc0NsaWNrICgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3Nob3cpIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgd2luZG93WydQcm9taXNlJ10uYWxsKHRoaXMuX29wZXJhdGlvbnMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2RvbmVuZW5lbmUnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgndXNlcGhvdG9zJywge2RldGFpbDogdGhpcy5faW1hZ2VzLm1hcChkID0+ICh7d2lkdGg6IGQud2lkdGgsIGhlaWdodDpkLmhlaWdodCwgZGF0YTpkLmRhdGF9KSl9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc2V0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgc3RhdGljIF9jYW1lcmE6IE11bHRpQ2FtZXJhO1xuICAgIHN0YXRpYyB0b3VjaFR5cGVzID0ge1xuICAgICAgICBOT05FOiAwIGFzIDAsXG4gICAgICAgIERSQUdfWk9PTV9USFVNQjogMSBhcyAxLFxuICAgICAgICBEUkFHX1pPT01fRklOR0VSUzogMiBhcyAyLFxuICAgICAgICBIT0xEX1pPT01fUExVUzogNCBhcyA0LFxuICAgICAgICBIT0xEX1pPT01fTUlOVVM6IDggYXMgOFxuICAgIH07XG4gICAgdG91Y2hUeXBlcyA9IE11bHRpQ2FtZXJhLnRvdWNoVHlwZXM7XG5cbiAgICBzdGF0aWMgc2hvdyAoc3VjY2VzczogKGltYWdlczogTXVsdGlDYW1lcmFJbWFnZVtdKSA9PiBhbnksIGNvbmZpZzogTXVsdGlDYW1lcmFDb25maWcpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignc3RhdGljc2hvdy4uLicpO1xuICAgICAgICB2YXIgY2FtZXJhID0gdGhpcy5fY2FtZXJhO1xuICAgICAgICBjb25zdCBjYW5jZWxDQiA9ICgpID0+IHtcbiAgICAgICAgICAgIHN1Y2Nlc3MgJiYgc3VjY2VzcyhbXSk7XG4gICAgICAgICAgICBjYW1lcmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigndXNlcGhvdG9zJywgdXNlUGhvdG9zQ0IpO1xuICAgICAgICAgICAgY2FtZXJhLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NhbmNlbCcsIGNhbmNlbENCKTtcbiAgICAgICAgfSxcbiAgICAgICAgdXNlUGhvdG9zQ0IgPSAoJGV2ZW50OiBDdXN0b21FdmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignaW4gdXNlIHBob3RvcycpO1xuICAgICAgICAgICAgc3VjY2VzcyAmJiBzdWNjZXNzKCRldmVudC5kZXRhaWwpO1xuICAgICAgICAgICAgY2FtZXJhLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3VzZXBob3RvcycsIHVzZVBob3Rvc0NCKTtcbiAgICAgICAgICAgIGNhbWVyYS5yZW1vdmVFdmVudExpc3RlbmVyKCdjYW5jZWwnLCBjYW5jZWxDQik7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHN1Y2Nlc3MgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnID0gc3VjY2VzcztcbiAgICAgICAgICAgICAgICBzdWNjZXNzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghY2FtZXJhKSB7XG4gICAgICAgICAgICBjYW1lcmEgPSB0aGlzLl9jYW1lcmEgPSBuZXcgTXVsdGlDYW1lcmEoKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY2FtZXJhLl9lbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBjYW1lcmEuYWRkRXZlbnRMaXN0ZW5lcigndXNlcGhvdG9zJywgdXNlUGhvdG9zQ0IpO1xuICAgICAgICBjYW1lcmEuYWRkRXZlbnRMaXN0ZW5lcignY2FuY2VsJywgY2FuY2VsQ0IpO1xuICAgICAgICBjYW1lcmEuc2hvdyhjb25maWcpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBzdGF0aWMgaGlkZSAoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jYW1lcmEpIHtcbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYS5oaWRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgc3RhdGljIGFkZEV2ZW50TGlzdGVuZXIgKCkge1xuICAgICAgICB0aGlzLl9jYW1lcmEuYWRkRXZlbnRMaXN0ZW5lci5hcHBseSh0aGlzLl9jYW1lcmEsIGFyZ3VtZW50cyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHN0YXRpYyByZW1vdmVFdmVudExpc3RlbmVyICgpIHtcbiAgICAgICAgdGhpcy5fY2FtZXJhLnJlbW92ZUV2ZW50TGlzdGVuZXIuYXBwbHkodGhpcy5fY2FtZXJhLCBhcmd1bWVudHMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBzdGF0aWMgX3Bob3RvV3JhcHBlclRlbXBsYXRlOiBIVE1MRWxlbWVudCA9ICgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICByZXN1bHQuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhbWVyYS1waG90by13cmFwcGVyXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhbWVyYS1waG90b1wiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYW1lcmEtcGhvdG8tcmVtb3ZlXCI+LTwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+IGA7XG4gICAgICAgIHJldHVybiByZXN1bHQuY2hpbGRyZW5bMF0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgfSkoKTtcblxuICAgIHN0YXRpYyBfdGVtcGxhdGU6IEhUTUxFbGVtZW50ID0gKCgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHJlc3VsdC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICAke2h0bWx9XG4gICAgICAgICAgICA8c3R5bGU+XG4gICAgICAgICAgICAke2Nzc31cbiAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgIGA7XG4gICAgICAgIHJldHVybiByZXN1bHQuY2hpbGRyZW5bMF0gYXMgSFRNTEVsZW1lbnRcbiAgICB9KSgpO1xuXG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFBTyxJQUFNLElBQUksR0FBRyxveURBdUNuQixDQUFBOztJQ3ZDTSxJQUFNLEdBQUcsR0FBRyx1cVZBbVZsQixDQUFDOzs7UUN0UEU7WUFBQSxpQkEwREM7WUFyRkQsWUFBTyxHQUF1QixFQUFFLENBQUM7WUFHakMsYUFBUSxHQUFXLENBQUMsQ0FBQztZQUNyQixhQUFRLEdBQVcs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
